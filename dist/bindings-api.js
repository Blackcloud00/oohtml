(()=>{var at=Object.defineProperty;var Ge=(r,e)=>{for(var n in e)at(r,n,{get:e[n],enumerable:!0})};var ke={};Ge(ke,{apply:()=>je,batch:()=>Ie,construct:()=>Me,defineProperties:()=>St,defineProperty:()=>qe,deleteProperties:()=>It,deleteProperty:()=>de,get:()=>H,getOwnPropertyDescriptor:()=>Te,getOwnPropertyDescriptors:()=>Ct,getPrototypeOf:()=>Ce,has:()=>me,intercept:()=>Tt,isExtensible:()=>Se,observe:()=>Ye,ownKeys:()=>ae,path:()=>Pt,preventExtensions:()=>De,reduce:()=>Fe,set:()=>Q,setPrototypeOf:()=>He});function w(r){return!Array.isArray(r)&&typeof r=="object"&&r}function W(r){return typeof r}function _(r){return Array.isArray(r)}function ye(r,e,n=null){return _(e)?r.filter(t=>n?e.filter(i=>n(t,i)).length:e.indexOf(t)!==-1):[]}function F(r,...e){if(globalThis.webqit||(globalThis.webqit={}),globalThis.webqit.refs||Object.defineProperty(globalThis.webqit,"refs",{value:new Y}),!arguments.length)return globalThis.webqit.refs;let n=globalThis.webqit.refs.get(r);n||(n=new Y,globalThis.webqit.refs.set(r,n));let t,i;for(;t=e.shift();)(i=n)&&!(n=n.get(t))&&(n=new Y,i.set(t,n));return n}var Y=class extends Map{constructor(...e){super(...e),this.observers=new Set}set(e,n){let t=super.set(e,n);return this.fire("set",e,n,e),t}delete(e){let n=super.delete(e);return this.fire("delete",e),n}has(e){return this.fire("has",e),super.has(e)}get(e){return this.fire("get",e),super.get(e)}keyNames(){return Array.from(super.keys())}observe(e,n,t){let i={type:e,key:n,callback:t};return this.observers.add(i),()=>this.observers.delete(i)}unobserve(e,n,t){if(Array.isArray(e)||Array.isArray(n))throw new Error('The "type" and "key" arguments can only be strings.');for(let i of this.observers)!(ue([e,"*"],i.type)&&ue([n,"*"],i.key)&&i.callback===t)||this.observers.delete(i)}fire(e,n,...t){for(let i of this.observers)!(ue([e,"*"],i.type)&&ue([n,"*"],i.key))||i.callback(...t)}},ue=(r,e)=>Array.isArray(e)?ye(r,e).length:r.includes(e);function N(r){return typeof r=="function"}function _e(r){return N(r)&&/^class\s?/.test(Function.prototype.toString.call(r))}function Z(r){return r===null||r===""}function M(r){return arguments.length&&(r===void 0||typeof r>"u")}function v(r){return Array.isArray(r)||typeof r=="object"&&r||N(r)}function xe(r){return Z(r)||M(r)||r===!1||r===0||v(r)&&!Object.keys(r).length}function b(r){return N(r)||r&&{}.toString.call(r)==="[object function]"}function K(r){return r instanceof Number||typeof r=="number"}function S(r){return K(r)||r!==!0&&r!==!1&&r!==null&&r!==""&&!isNaN(r*1)}function U(r){return r instanceof String||typeof r=="string"&&r!==null}function we(r){return!U(r)&&!M(r.length)}function ce(r,...e){return e.forEach(n=>{r.indexOf(n)<0&&r.push(n)}),r}function be(t,e){e=e||Object.prototype,e=e&&!_(e)?[e]:e;for(var n=[],t=t;t&&(!e||e.indexOf(t)<0)&&t.name!=="default";)n.push(t),t=t?Object.getPrototypeOf(t):null;return n}function ve(r,e){var n=[];return be(r,e).forEach(t=>{ce(n,...Object.getOwnPropertyNames(t))}),n}function I(r,e,n=!1,t=!1,i=!1){var o=0,s=r.shift();if((S(s)||s===!0||s===!1)&&(o=s,s=r.shift()),!r.length)throw new Error("_merge() requires two or more array/objects.");return r.forEach((u,f)=>{!v(u)&&!b(u)||(n?ve(u):Object.keys(u)).forEach(a=>{if(!!e(a,s,u,f)){var c=s[a],l=u[a];if((_(c)&&_(l)||w(c)&&w(l))&&(o===!0||o>0))s[a]=_(c)&&_(l)?[]:{},I([S(o)?o-1:o,s[a],c,l],e,n,t,i);else if(_(s)&&_(u))t?s[a]=l:s.push(l);else try{i?Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(u,a)):s[a]=u[a]}catch{}}})}),s}function ee(...r){return I(r,(e,n,t)=>!0,!1,!1,!1)}function O(r,e=!0){return _(r)?r:!e&&w(r)?[r]:r!==!1&&r!==0&&xe(r)?[]:we(r)?Array.prototype.slice.call(r):w(r)?Object.values(r):[r]}var V=class{constructor(e,n){this.registry=e,Object.assign(this,{...n,target:e.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var P=(...r)=>F("observer-api",...r),J=(r,e)=>r instanceof Promise?r.then(e):e(r);var te=class extends V{constructor(){super(...arguments),this.emit.currentRegistration=this,Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal})}remove(){this.abortController.abort(),super.remove()}fire(e){if(this.emit.recursionTarget&&!["inject","force-async","force-sync"].includes(this.params.recursions))return;let n=e,t=this.filter;if(t!==1/0&&(t=O(t,!1))&&(n=e.filter(i=>t.includes(i.key))),this.params.diff&&(n=n.filter(i=>i.type!=="set"||i.value!==i.oldValue)),n.length){if(this.emit.recursionTarget&&this.params.recursions!=="force-sync"){this.emit.recursionTarget.push(...n);return}this.emit.recursionTarget=this.params.recursions==="inject"?n:[];let i=this.filter===1/0||Array.isArray(this.filter)?this.emit(n,this):this.emit(n[0],this);return J(i,o=>{let s=this.emit.recursionTarget;return delete this.emit.recursionTarget,this.params.recursions==="force-async"&&s.length?this.emit.currentRegistration.fire(s):o})}}};var z=class{constructor(e){this.target=e,this.entries=[]}addRegistration(e){return this.entries.push(e),e}removeRegistration(e){this.entries=this.entries.filter(n=>n!==e)}static _getInstance(e,n,t=!0,i=this.__namespace){if(!v(n))throw new Error(`Subject must be of type object; "${W(n)}" given!`);let o=this;return i&&P("namespaces").has(e+"-"+i)&&(o=P("namespaces").get(e+"-"+i),e+="-"+i),!P(n,"registry").has(e)&&t&&P(n,"registry").set(e,new o(n)),P(n,"registry").get(e)}static _namespace(e,n,t=null){if(e+="-"+n,arguments.length===2)return P("namespaces").get(e);if(!(t.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${n} must be a subclass of ${this.name}.`);P("namespaces").set(e,t),t.__namespace=n}};var k=class extends z{static getInstance(e,n=!0,t=null){return super._getInstance("listeners",...arguments)}static namespace(e,n=null){return super._namespace("listeners",...arguments)}constructor(e){super(e),this.batches=[]}addRegistration(e,n,t){return super.addRegistration(new te(this,{filter:e,emit:n,params:t}))}emit(e){if(this.batches.length){this.batches[0].events.push(...e);return}this.entries.forEach(n=>n.fire(e))}batch(e){this.batches.unshift({entries:[...this.entries],events:[]});let n=e();return J(n,t=>{let i=this.batches.shift();return i.events.length&&i.entries.forEach(o=>o.fire(i.events)),t})}};var re=class extends V{exec(e,n,t){return this.running||!this.traps[e.type]?n(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[e.type](e,t,(...i)=>(this.running=!1,n(...i))))}};var j=class extends z{static getInstance(e,n=!0,t=null){return super._getInstance("traps",...arguments)}static namespace(e,n=null){return super._namespace("traps",...arguments)}addRegistration(e){return super.addRegistration(new re(this,e))}emit(e,n=null){let t=this;return function i(o,...s){let u=t.entries[o];return u?u.exec(e,(...f)=>i(o+1,...f),...s):n?n(e,...s):s[0]}(0)}};var C=class{constructor(e,n){if(this.target=e,!n.type)throw new Error("Descriptor type must be given in definition!");Object.assign(this,n)}};var Pe={};Ge(Pe,{accessorize:()=>Ot,proxy:()=>Et,unaccessorize:()=>At,unproxy:()=>le});function Ot(r,e,n={}){r=Ee(r);let t=P(r,"accessorizedProps");function i(f){let a,c=r;do a=Object.getOwnPropertyDescriptor(c,f);while(!a&&(c=Object.getPrototypeOf(c)));return a?{proto:c,descriptor:a}:{descriptor:{value:void 0,configurable:!0,enumerable:!0,writable:!0}}}function o(f){if(t.has(f+""))return!0;let a=i(f);a.getValue=function(){return this.descriptor.get?this.descriptor.get():this.descriptor.value},a.setValue=function(d){return this.dirty=!0,this.descriptor.set?this.descriptor.set(d)!==!1:(this.descriptor.value=d,!0)},a.intact=function(){let d=Object.getOwnPropertyDescriptor(r,f);return d?.get===l.get&&d?.set===l.set&&t.get(f+"")===this},a.restore=function(){return this.intact()?(this.proto&&this.proto!==r||!this.proto&&!this.dirty?delete r[f]:Object.defineProperty(r,f,this.descriptor),t.delete(f+""),!0):!1},t.set(f+"",a);let{enumerable:c=!0}=a.descriptor,l={enumerable:c,configurable:!0};("value"in a.descriptor||a.descriptor.set)&&(l.set=function(d){return Q(this,f,d,n)}),("value"in a.descriptor||a.descriptor.get)&&(l.get=function(){return H(this,f,n)});try{return Object.defineProperty(r,f,l),!0}catch{return t.delete(f+""),!1}}let u=(Array.isArray(e)?e:e===void 0?Object.keys(r):[e]).map(o);return e===void 0||Array.isArray(e)?u:u[0]}function At(r,e,n={}){r=Ee(r);let t=P(r,"accessorizedProps");function i(u){return t.has(u+"")?t.get(u+"").restore():!0}let s=(Array.isArray(e)?e:e===void 0?Object.keys(r):[e]).map(i);return e===void 0||Array.isArray(e)?s:s[0]}function Et(r,e={}){r=Ee(r);let n=new Proxy(r,{apply:(t,i,o)=>je(t,i,o,e),construct:(t,i,o=null)=>Me(t,i,o,e),defineProperty:(t,i,o)=>qe(t,i,o,e),deleteProperty:(t,i)=>de(t,i,e),get:(t,i,o=null)=>{let s=H(t,i,{...e,receiver:o});return e.proxyAutoBinding!==!1&&b(s)&&!_e(s)?function(...u){let f=this||n;return Ie(f,()=>s.call(f,...u))}:s},getOwnPropertyDescriptor:(t,i)=>Te(t,i,e),getPrototypeOf:t=>Ce(t,e),has:(t,i)=>me(t,i,e),isExtensible:t=>Se(t,e),ownKeys:t=>ae(t,e),preventExtensions:t=>De(t,e),set:(t,i,o,s=null)=>Q(t,i,o,{...e,receiver:s}),setPrototypeOf:(t,i)=>He(t,i,e)});return P(n).set(n,r),n}function le(r){return P(r).get(r)||r}function Ee(r){if(!r||!v(r))throw new Error("Target must be of type object!");return le(r)}var ne=class extends Array{};function Pt(...r){return new ne(...r)}function Fe(r,e,n,t=o=>o,i={}){if(!!e.length)return function o(s,u,f){let a=u[f.level],c=f.level===u.length-1;return s instanceof C&&s.type!=="get"?f={...f,probe:"always"}:f.probe!=="always"&&(f={...f,probe:!c}),n(s,a,(l,...d)=>{let g=m=>{m instanceof C&&(m.path=[m.key],s instanceof C&&(m.path=s.path.concat(m.key),Object.defineProperty(m,"context",{get:()=>s,configurable:!0})))},x=m=>{let y=R(m,!1);return J(y,p=>{m instanceof C?m.value=p:m=p;let h=d[0]||{};return o(m,u,{...f,...h,level:f.level+1})})};return pe(a)&&Array.isArray(l)?(l.forEach(g),c?t(l,...d):l.map(x)):(g(l),c?t(l,...d):x(l))},f)}(r,e.slice(0),{...i,level:0})}function Ye(r,e,n,t={}){if(r=R(r,!t.level),b(arguments[1])&&([,n,t={}]=arguments,e=1/0),!b(n))throw new Error(`Handler must be a function; "${W(n)}" given!`);if(e instanceof ne)return Fe(r,e,Ye,n,t);if(t={...t,descripted:!0},delete t.live,!v(r))return t.probe&&H(r,e,n,t);let i=Ze(r,e,n,t);return t.probe?H(r,e,i,t):i()}function Tt(r,e,n={}){return r=R(r),w(e)||([,,,n={}]=arguments,e={[arguments[1]]:arguments[2]}),j.getInstance(r,!0,n.namespace).addRegistration({traps:e,params:n})}function Te(r,e,n=i=>i,t={}){return q(r,"getOwnPropertyDescriptor",{key:e},n,t)}function Ct(r,e,n=i=>i,t={}){return q(r,"getOwnPropertyDescriptors",{key:e},n,t)}function Ce(r,e=t=>t,n={}){return q(r,"getPrototypeOf",{},e,n)}function Se(r,e=t=>t,n={}){return q(r,"isExtensible",{},e,n)}function ae(r,e=t=>t,n={}){return q(r,"ownKeys",{},e,n)}function me(r,e,n=i=>i,t={}){return q(r,"has",{key:e},n,t)}function H(r,e,n=i=>i,t={}){let i;return r=R(r,!t.level),w(n)?[t,n]=[n,o=>o]:t.live&&(i=!0),e instanceof ne?Fe(r,e,H,n,t):qt(r,e,o=>{let s=[...o];return function u(f,a,c){if(!a.length)return c(f);let l=a.shift();if(!["string","number","symbol"].includes(typeof l))throw new Error(`Property name/key ${l} invalid.`);function d(m,y=void 0){let p=E=>(m.value=E,u([...f,t.live||t.descripted?m:E],a,c));if(arguments.length>1)return p(y);let h=P(r,"accessorizedProps",!1),A=h&&h.get(m.key+"");return A&&A.intact()?p(A.getValue()):p(Reflect.get(r,m.key,...t.receiver?[t.receiver]:[]))}let g=new C(r,{type:"get",key:l,value:void 0,related:s});if(!v(r))return u([...f,t.live||t.descripted?g:void 0],a,c);let x=j.getInstance(r,!1,t.namespace);return x?x.emit(g,d):d(g)}([],o.slice(0),u=>{let f=pe(e)?u:u[0];return i&&v(r)?Ze(r,e,n,t)(f):n(f)})},t)}function Ie(r,e,n={}){return r=R(r),k.getInstance(r,!0,n.namespace).batch(e)}function Q(r,e,n,t=s=>s,i={},o=!1){r=R(r);let s=[[e,n]];w(e)&&([,,t=f=>f,i={},o=!1]=arguments,s=Object.entries(e)),w(t)&&([o,i,t]=[typeof i=="boolean"?i:!1,t,f=>f]);let u=s.map(([f])=>f);return function f(a,c,l){if(!c.length)return l(a);let[d,g]=c.shift();function x(y,p=void 0){let h=T=>(y.status=T,f(a.concat(y),c,l));if(arguments.length>1)return h(y,p);let A=P(r,"accessorizedProps",!1),E=A&&A.get(y.key+"");return y.type==="defineProperty"?(E&&!E.restore()&&h(!1),Object.defineProperty(r,y.key,y.value),h(!0)):E&&E.intact()?h(E.setValue(y.value)):h(Reflect.set(r,y.key,y.value))}function m(y,p){if(i.diff&&g===p)return f(a,c,l);let h=new C(r,{type:o?"defineProperty":"set",key:d,value:g,isUpdate:y,oldValue:p,related:[...u],detail:i.detail}),A=j.getInstance(r,!1,i.namespace);return A?A.emit(h,x):x(h)}return me(r,d,y=>y?H(r,d,p=>m(y,p),i):m(y),i)}([],s.slice(0),f=>{let a=k.getInstance(r,!1,i.namespace);return a&&a.emit(f),t(pe(e)?f.map(c=>c.status):f[0]?.status)})}function qe(r,e,n,t=o=>o,i={}){return Q(r,e,n,t,i,!0)}function St(r,e,n=i=>i,t={}){return Q(r,e,n,t,!0)}function de(r,e,n=i=>i,t={}){r=R(r),w(n)&&([t,n]=[n,s=>s]);let i=O(e,!1),o=[...i];return function s(u,f,a){if(!f.length)return a(u);let c=f.shift();function l(g,x=void 0){let m=h=>(g.status=h,s(u.concat(g),f,a));if(arguments.length>1)return m(g,x);let y=P(r,"accessorizedProps",!1),p=y&&y.get(g.key+"");return p&&!p.restore()&&m(!1),m(Reflect.deleteProperty(r,g.key))}function d(g){let x=new C(r,{type:"deleteProperty",key:c,oldValue:g,related:[...o],detail:t.detail}),m=j.getInstance(r,!1,t.namespace);return m?m.emit(x,l):l(x)}return H(r,c,d,t)}([],i.slice(0),s=>{let u=k.getInstance(r,!1,t.namespace);return u&&u.emit(s),n(pe(e)?s.map(f=>f.status):s[0].status)})}function It(r,e,n=i=>i,t={}){return de(...arguments)}function Me(r,e,n=null,t=o=>o,i={}){return q(r,"construct",arguments.length>2?{argumentsList:e,newTarget:n}:{argumentsList:e},t,i)}function je(r,e,n,t=o=>o,i={}){return q(r,"apply",{thisArgument:e,argumentsList:n},t,i)}function He(r,e,n=i=>i,t={}){return q(r,"setPrototypeOf",{proto:e},n,t)}function De(r,e=t=>t,n={}){return q(r,"preventExtensions",{},e,n)}function Ze(r,e,n,t={}){let i;t.signal||(i=new AbortController,t={...t,signal:i.signal});let o=k.getInstance(r,!0,t.namespace);return function s(u,f=null){f?.remove();let c={signal:o.addRegistration(e,s,t).signal};if(arguments.length){let l=n(u,c);if(arguments.length>1)return l}return i}}function q(r,e,n={},t=o=>o,i={}){r=R(r),w(t)&&([i,t]=[t,f=>f]);function o(f,a){return arguments.length>1?t(a):t(Reflect[e](r,...Object.values(n)))}let s=new C(r,{type:e,...n}),u=j.getInstance(r,!1,i.namespace);return u?u.emit(s,o):o(s)}function pe(r){return r===1/0||Array.isArray(r)}function R(r,e=!0){if((!r||!v(r))&&e)throw new Error(`Object must be of type object or array! "${W(r)}" given.`);return r instanceof C&&(r=r.value),r&&le(r)}function qt(r,e,n,t={}){return e===1/0?t.level&&!v(r)?n([]):ae(r,n,t):n(O(e,!1))}var Mt={...ke,...Pe},D=Mt;function ie(r,e,n={},t={}){e=O(e).slice();for(var i=r;!M(i)&&!Z(i)&&e.length;){var o=e.shift();if(!(n.get?n.get(i,o):v(i)?o in i:i[o])){t.exists=!1;return}i=n.get?n.get(i,o):i[o]}return t.exists=!0,i}function Re(r,e,n,t={},i={}){let o=(c,l,d)=>i.set?i.set(c,l,d):(S(e[u])&&_(c)?c.push(d):c[l]=d,!0);e=O(e);for(var s=r,u=0;u<e.length;u++)if(u<e.length-1){if(!s||!v(s)&&!b(s))return!1;var f=ie(s,e[u],i);if(!v(f)){if(i.buildTree===!1)return!1;f=b(i.buildTree)?i.buildTree(u):S(e[u+1])?[]:{};var a=o(s,e[u],f);if(!a)return!1}s=f}else return o(s,e[u],n)}var oe=class{constructor(e,n=!0){Object.defineProperty(this,"window",{value:e}),Object.defineProperty(this,"readCallbacks",{value:new Set}),Object.defineProperty(this,"writeCallbacks",{value:new Set}),this.async=n,this.window.requestAnimationFrame?this._run():this.async=!1}_run(){this.window.requestAnimationFrame(()=>{for(let e of this.readCallbacks)e(),this.readCallbacks.delete(e);for(let e of this.writeCallbacks)e(),this.writeCallbacks.delete(e);this._run()})}onread(e,n=!1){if(n)return new Promise(t=>{this.async===!1?t(e()):this.readCallbacks.add(()=>{t(e())})});this.async===!1?e():this.readCallbacks.add(e)}onwrite(e,n=!1){if(n)return new Promise(t=>{this.async===!1?t(e()):this.writeCallbacks.add(()=>{t(e())})});this.async===!1?e():this.writeCallbacks.add(e)}cycle(e,n,t){this.onread(()=>{let i=e(t),o=s=>{s!==void 0&&this.onwrite(()=>{let u=n(s,t),f=a=>{a!==void 0&&this.cycle(e,n,a)};u instanceof Promise?u.then(f):f(u)})};i instanceof Promise?i.then(o):o(i)})}};var G=class{constructor(e,n,t){this.context=e,this.namespace=n,this.window=e.defaultView||e.ownerDocument?.defaultView||t,this.document=this.window.document,this.webqit=this.window.webqit,Object.defineProperty(this,"#",{value:{}})}resolveArgs(e){if(b(e[0])?e=[[],...e]:w(e[0])&&e.length===1?e=[[],void 0,e[0]]:w(e[1])&&e.length===2?e=[O(e[0],!1),void 0,e[1]]:e[0]=O(e[0],!1),e[0].filter(n=>typeof n!="string"&&!(n instanceof this.window.Node)).length)throw new Error("Argument #2 must be either a string or a Node object, or a list of those.");return e}registry(...e){return F("realdom.realtime",this.window,this.namespace,...e)}createSignalGenerator(){return{generate(){return this.lastController?.abort(),this.lastController=new AbortController,{signal:this.lastController.signal}},disconnect(){this.lastController?.abort()}}}forEachMatchingContext(e,n,t){let{window:i}=this,o=Array.isArray(n)?n:[n],s=new Set;for(let[u,f]of this.registry(e))for(let[a,c]of f){let l=o.filter(d=>a.contains(d.target)?u==="subtree"||d.target===a:!1);if(!!l.length){Array.isArray(n)||(l=l[0]);for(let d of c)s.add([d,l,a])}}for(let[u,f,a]of s)t.call(this,u,f,a)}disconnectables(e,...n){let t={disconnect(){n.forEach(i=>i&&b(i.disconnect)&&i.disconnect()||b(i)&&i()||w(i)&&(i.disconnected=!0))}};return e&&e.addEventListener("abort",()=>t.disconnect()),t}};var L=class extends G{constructor(e,...n){super(e,"attr",...n)}get(e,n=void 0,t={}){let i=typeof e=="string";[e=[],n=void 0,t={}]=this.resolveArgs(arguments);let{context:o}=this,s=rt(o,e),u=i?s[0]:s;if(!n)return u;let f=n&&t.lifecycleSignals&&this.createSignalGenerator(),a=f?.generate()||{};if(n(u,a,o),t.live){f&&(t={...t,signalGenerator:f});let c=this.observe(i?e[0]:e,n,{newValue:!0,...t});return this.disconnectables(t.signal,c)}}observe(e,n,t={}){let i=typeof e=="string";if([e=[],n,t={}]=this.resolveArgs(arguments),["sync","intercept"].includes(t.timing))return this.observeSync(i?e[0]:e,n,t);if(t.timing&&t.timing!=="async")throw new Error(`Timing option "${t.timing}" invalid.`);let{context:o,window:s,webqit:u}=this;t.eventDetails&&!u.realdom.attrInterceptionHooks?.intercepting&&et.call(s,"intercept",()=>{});let f=new s.MutationObserver(d=>{d=tt(d).map(g=>nt.call(s,g)),Ke.call(s,l,d,o)}),a={attributes:!0,attributeOldValue:t.oldValue,subtree:t.subtree};e.length&&(a.attributeFilter=e),f.observe(o,a);let c=t.signalGenerator||t.lifecycleSignals&&this.createSignalGenerator(),l={context:o,filter:e,callback:n,params:t,atomics:new Map,originalFilterIsString:i,signalGenerator:c,disconnectable:f};return this.disconnectables(t.signal,f,c)}observeSync(e,n,t={}){let i=typeof e=="string";[e,n,t={}]=this.resolveArgs(arguments);let{context:o,window:s}=this;if(t.timing&&!["sync","intercept"].includes(t.timing))throw new Error(`Timing option "${t.timing}" invalid.`);let u=t.timing==="intercept"?"intercept":"sync",f=t.subtree?"subtree":"children";this.registry(u).size||et.call(s,u,x=>{this.forEachMatchingContext(u,x,Ke)});let a={disconnect(){g.delete(l),g.size||d.delete(o)}},c=t.signalGenerator||t.lifecycleSignals&&this.createSignalGenerator(),l={context:o,filter:e,callback:n,params:t,atomics:new Map,originalFilterIsString:i,signalGenerator:c,disconnectable:a},d=this.registry(u,f);d.has(o)||d.set(o,new Set);let g=d.get(o);return g.add(l),this.disconnectables(t.signal,a,c)}};function tt(r){return r.reduce((e,n,t)=>e[t-1]?.attributeName===n.attributeName?e:e.concat(n),[])}function Ke(r,e){let{context:n,filter:t,callback:i,params:o,atomics:s,originalFilterIsString:u,signalGenerator:f}=r;if(o.atomic&&!s.size?e=rt(n,t,e):o.timing!=="async"&&t.length&&(e=e.filter(l=>t.includes(l.name))),!e.length)return;o.newValue===null&&o.oldValue===null&&o.eventDetails||(e=e.map(l=>{let d;return o.eventDetails||({event:d,...l}=l),!o.oldValue&&"oldValue"in l&&({oldValue:d,...l}=l),!o.newValue&&"value"in l?{value:d,...l}=l:o.newValue&&typeof l.value>"u"&&(l={...l,value:l.target.getAttribute(l.name)}),l})),o.atomic&&(e.forEach(l=>s.set(l.name,l)),e=Array.from(s.entries()).map(([,l])=>l));let a=u?e[0]:e,c=f?.generate()||{};i(a,c,n)}function rt(r,e,n=[]){let t={event:null,type:"attribute"};return e.length?e.map(o=>n.find(s=>s.name===o)||{target:r,name:o,value:r.getAttribute(o),...t}):Array.from(r.attributes).map(o=>n.find(s=>s.name===o.nodeName)||{target:r,name:o.nodeName,value:o.nodeValue,...t})}function nt({target:r,attributeName:e,value:n,oldValue:t}){let s=(this.webqit.realdom.attrInterceptionRecords?.get(r)||{})[e]||"mutation";return{target:r,name:e,value:n,oldValue:t,type:"observation",event:s}}function et(r,e){let n=this,{webqit:t,document:i,Element:o}=n;t.realdom.attrInterceptionHooks||Object.defineProperty(t.realdom,"attrInterceptionHooks",{value:new Map}),t.realdom.attrInterceptionHooks.has(r)||t.realdom.attrInterceptionHooks.set(r,new Set),t.realdom.attrInterceptionHooks.get(r).add(e);let s=()=>t.realdom.attrInterceptionHooks.get(r).delete(e);if(t.realdom.attrInterceptionHooks?.intercepting)return s;console.warn("Attr mutation APIs are now being intercepted."),t.realdom.attrInterceptionHooks.intercepting=!0,Object.defineProperty(t.realdom,"attrInterceptionRecords",{value:new Map});let u=(c,l)=>{t.realdom.attrInterceptionRecords.has(c.target)||t.realdom.attrInterceptionRecords.set(c.target,{});let d=t.realdom.attrInterceptionRecords.get(c.target);clearTimeout(d[c.name]?.timeout),d[c.name]=c.event;let g=setTimeout(()=>{delete d[c.name]},0);Object.defineProperty(c.event,"timeout",{value:g,configurable:!0}),t.realdom.attrInterceptionHooks.get("intercept")?.forEach(m=>m([c]));let x=l();return t.realdom.attrInterceptionHooks.get("sync")?.forEach(m=>m([c])),x};new n.MutationObserver(c=>{c=tt(c).map(l=>nt.call(n,l)).filter((l,d)=>!Array.isArray(l.event)),c.length&&(t.realdom.attrInterceptionHooks.get("intercept")?.forEach(l=>l(c)),t.realdom.attrInterceptionHooks.get("sync")?.forEach(l=>l(c)))}).observe(i,{attributes:!0,subtree:!0,attributeOldValue:!0});let a=Object.create(null);return["setAttribute","removeAttribute","toggleAttribute"].forEach(c=>{a[c]=o.prototype[c],o.prototype[c]=function(...l){let d,g=this.getAttribute(l[0]);["setAttribute","toggleAttribute"].includes(c)&&(d=l[1]),c==="toggleAttribute"&&d===void 0&&(d=g===null);let x={target:this,name:l[0],value:d,oldValue:g,type:"interception",event:[this,c]};return u(x,()=>a[c].call(this,...l))}}),s}var se=class extends G{constructor(e,...n){super(e,"tree",...n)}attr(e,n=void 0,t={}){let{context:i,window:o}=this;return new L(i,o).get(...arguments)}query(e,n=void 0,t={}){[e,n=void 0,t={}]=this.resolveArgs(arguments);let{context:i}=this,o=new Map,s=a=>(o.has(a)||o.set(a,{target:a,entrants:[],exits:[],type:"query",event:null}),o.get(a));if((!t.generation||t.generation==="entrants")&&(e.length?e.every(a=>typeof a=="string")&&(e=e.join(","))&&(t.subtree?i.querySelectorAll(e):[...i.children].filter(c=>c.matches(e))).forEach(c=>s(c.parentNode||i).entrants.push(c)):[...i.children].forEach(a=>s(i).entrants.push(a))),!n)return o;let u={disconnected:!1},f=n&&t.lifecycleSignals&&this.createSignalGenerator();for(let[,a]of o){if(u.disconnected)break;let c=f?.generate()||{};n(a,c,i)}if(t.live){f&&(t={...t,signalGenerator:f});let a=this.observe(e,n,t);return this.disconnectables(t.signal,u,a)}return this.disconnectables(t.signal,u,f)}children(e,n=void 0,t={}){return[e,n=void 0,t={}]=this.resolveArgs(arguments),this.query(e,n,{...t,subtree:!1})}subtree(e,n=void 0,t={}){return[e,n=void 0,t={}]=this.resolveArgs(arguments),this.query(e,n,{...t,subtree:!0})}observe(e,n,t={}){if([e,n,t={}]=this.resolveArgs(arguments),["sync","intercept"].includes(t.timing))return this.observeSync(e,n,t);if(t.timing&&t.timing!=="async")throw new Error(`Timing option "${t.timing}" invalid.`);let{context:i,window:o,webqit:s,document:u}=this;t.eventDetails&&(s.realdom.domInterceptionRecordsAlwaysOn=!0),(u.readyState==="loading"||s.realdom.domInterceptionRecordsAlwaysOn)&&!s.realdom.domInterceptionHooks?.intercepting&&st.call(o,"sync",()=>{});let f=new o.MutationObserver(l=>l.forEach(d=>{Le.call(o,c,ot.call(o,d),i)}));f.observe(i,{childList:!0,subtree:t.subtree});let a=t.signalGenerator||t.lifecycleSignals&&this.createSignalGenerator(),c={context:i,selectors:e,callback:n,params:t,signalGenerator:a,disconnectable:f};if(t.staticSensitivity){let l=it.call(o,c);return this.disconnectables(t.signal,f,a,l)}return this.disconnectables(t.signal,f,a)}observeSync(e,n,t={}){[e,n,t={}]=this.resolveArgs(arguments);let{context:i,window:o}=this;if(t.timing&&!["sync","intercept"].includes(t.timing))throw new Error(`Timing option "${t.timing}" invalid.`);let s=t.timing==="intercept"?"intercept":"sync",u=t.subtree?"subtree":"children";this.registry(s).size||st.call(o,s,x=>{this.forEachMatchingContext(s,x,Le)});let f=new o.MutationObserver(x=>x.forEach(m=>{Array.isArray((m=ot.call(o,m)).event)||Le.call(o,l,m,i)}));f.observe(i,{childList:!0,subtree:t.subtree});let a={disconnect(){f.disconnect(),g.delete(l),g.size||d.delete(i)}},c=t.signalGenerator||t.lifecycleSignals&&this.createSignalGenerator(),l={context:i,selectors:e,callback:n,params:t,signalGenerator:c,disconnectable:a},d=this.registry(s,u);d.has(i)||d.set(i,new Set);let g=d.get(i);if(g.add(l),t.staticSensitivity){let x=it.call(o,l);return this.disconnectables(t.signal,a,c,x)}return this.disconnectables(t.signal,a,c)}};function it(r){let e=this,{context:n,selectors:t,callback:i,params:o,signalGenerator:s}=r,u=d=>d.match(/\.([\w-]+)/g)?.length?["class"]:[],f=d=>d.match(/#([\w-]+)/g)?.length?["id"]:[],a=d=>[...d.matchAll(/\[([^\=\]]+)(\=[^\]]+)?\]/g)].map(g=>g[1]).concat(u(d)).concat(f(d));if(!(r.$attrs=Array.from(new Set(t.filter(d=>typeof d=="string"&&d.includes("[")).reduce((d,g)=>d.concat(a(g)),[])))).length)return;let c=new Set,l=new Set;return c.push=d=>(l.delete(d),c.add(d)),l.push=d=>(c.delete(d),l.add(d)),r.$deliveryCache={entrants:c,exits:l},new L(n,e).observe(r.$attrs,d=>{let g=new Map,x=p=>(g.has(p)||g.set(p,{target:p,entrants:[],exits:[],type:"static",event:null}),g.get(p)),m=new WeakMap,y=p=>(m.has(p)||m.set(p,t.some(h=>p.matches(h))),m.get(p));for(let p of d)["entrants","exits"].forEach(h=>{o.generation&&h!==o.generation||r.$deliveryCache[h].has(p.target)||(h==="entrants"?!y(p.target):y(p.target))||(r.$deliveryCache[h].push(p.target),x(p.target)[h].push(p.target),x(p.target).event=p.event)});for(let[,p]of g){let h=s?.generate()||{};i(p,h,n)}},{subtree:o.subtree,timing:o.timing,eventDetails:o.eventDetails})}function Le(r,e){let{context:n,selectors:t,callback:i,params:o,signalGenerator:s,$deliveryCache:u}=r,f={...e,entrants:[],exits:[]};if(o.eventDetails||delete f.event,["entrants","exits"].forEach(c=>{if(!(o.generation&&c!==o.generation)&&(t.length?f[c]=Ft(t,e[c],e.event!=="parse"):f[c]=[...e[c]],!!u))for(let l of f[c])u[c].push(l)}),!f.entrants.length&&!f.exits.length)return;let a=s?.generate()||{};i(f,a,n)}function Ft(r,e,n){e=Array.isArray(e)?e:[...e];let t=(i,o)=>{if(i=i.filter(s=>s.matches),typeof o=="string"){let s=i.filter(u=>u.matches(o));if(n&&(s=i.reduce((u,f)=>[...u,...f.querySelectorAll(o)],s)),s.length)return s}else if(i.includes(o)||n&&i.some(s=>s.contains(o)))return[o]};return e.$$searchCache||(e.$$searchCache=new Map),r.reduce((i,o)=>{let s;return e.$$searchCache.has(o)?s=e.$$searchCache.get(o):(s=t(e,o)||[],w(o)&&e.$$searchCache.set(o,s)),i.concat(s)},[])}function ot({target:r,addedNodes:e,removedNodes:n}){let t=this,i;return i=O(e).reduce((o,s)=>o||t.webqit.realdom.domInterceptionRecords?.get(s),null),i=O(n).reduce((o,s)=>o||t.webqit.realdom.domInterceptionRecords?.get(s),i),i=i||t.document.readyState==="loading"&&"parse"||"mutation",{target:r,entrants:e,exits:n,type:"observation",event:i}}function st(r,e){let n=this,{webqit:t,document:i,Node:o,CharacterData:s,Element:u,HTMLElement:f,HTMLTemplateElement:a,DocumentFragment:c}=n;t.realdom.domInterceptionHooks||Object.defineProperty(t.realdom,"domInterceptionHooks",{value:new Map}),t.realdom.domInterceptionHooks.has(r)||t.realdom.domInterceptionHooks.set(r,new Set),t.realdom.domInterceptionHooks.get(r).add(e);let l=()=>t.realdom.domInterceptionHooks.get(r).delete(e);if(t.realdom.domInterceptionHooks?.intercepting)return l;console.warn("DOM mutation APIs are now being intercepted."),t.realdom.domInterceptionHooks.intercepting=!0,Object.defineProperty(t.realdom,"domInterceptionRecords",{value:new Map});let d=(m,y)=>{m.entrants.concat(m.exits).forEach(h=>{clearTimeout(t.realdom.domInterceptionRecords.get(h)?.timeout),t.realdom.domInterceptionRecords.set(h,m.event);let A=setTimeout(()=>{t.realdom.domInterceptionRecords.delete(h)},0);Object.defineProperty(m.event,"timeout",{value:A,configurable:!0})}),t.realdom.domInterceptionHooks.get("intercept")?.forEach(h=>h(m));let p=y();return t.realdom.domInterceptionHooks.get("sync")?.forEach(h=>h(m)),p},g={characterData:Object.create(null),other:Object.create(null)};["insertBefore","insertAdjacentElement","insertAdjacentHTML","setHTML","replaceChildren","replaceWith","remove","replaceChild","removeChild","before","after","append","prepend","appendChild"].forEach(m=>{function y(...p){let h=this instanceof s?g.characterData:g.other,A=()=>h[m].call(this,...p);if(!(this instanceof s||this instanceof u||this instanceof c))return A();let E=[],T=[],X=this;["insertBefore"].includes(m)?T=[p[0]]:["insertAdjacentElement","insertAdjacentHTML"].includes(m)?(T=[p[1]],["beforebegin","afterend"].includes(p[0])&&(X=this.parentNode)):["setHTML","replaceChildren"].includes(m)?(E=[...this.childNodes],T=m==="replaceChildren"?[...p]:[p[0]]):["replaceWith","remove"].includes(m)?(E=[this],T=m==="replaceWith"?[...p]:[],X=this.parentNode):["replaceChild"].includes(m)?(E=[p[1]],T=[p[0]]):["removeChild"].includes(m)?E=[...p]:(T=[...p],["before","after"].includes(m)&&(X=this.parentNode));let $=m;if(["insertAdjacentHTML","setHTML"].includes(m)){let ze=this.nodeName;if(m==="insertAdjacentHTML"&&["beforebegin","afterend"].includes(p[0])){if(!this.parentNode)return h[m].call(this,...p);ze=this.parentNode.nodeName}let fe=i.createElement(ze);h.setHTML.call(fe,T[0],m==="setHTML"?p[1]:{}),T=[...fe.childNodes],m==="insertAdjacentHTML"?($="insertAdjacentElement",p[1]=new c,p[1].______isTemp=!0,p[1].append(...fe.childNodes)):($="replaceChildren",p=[...fe.childNodes])}return d({target:X,entrants:T,exits:E,type:"interception",event:[this,m]},()=>h[$].call(this,...p))}["insertBefore","replaceChild","removeChild","appendChild"].includes(m)?(g.other[m]=o.prototype[m],o.prototype[m]=y):(["after","before","remove","replaceWith"].includes(m)&&(g.characterData[m]=s.prototype[m],s.prototype[m]=y),u.prototype[m]&&(g.other[m]=u.prototype[m],u.prototype[m]=y))});let x=Object.create(null);return["outerHTML","outerText","innerHTML","innerText","textContent","nodeValue"].forEach(m=>{let y=["textContent","nodeValue"].includes(m)?o:["outerText","innerText"].includes(m)?f:u;x[m]=Object.getOwnPropertyDescriptor(y.prototype,m),Object.defineProperty(y.prototype,m,{...x[m],set:function(p){let h=()=>x[m].set.call(this,p);if(!(this instanceof u))return h();let A=[],E=[],T=this;if(["outerHTML","outerText"].includes(m)?(A=[this],T=this.parentNode):A=[...this.childNodes],["outerHTML","innerHTML"].includes(m)){let $=this.nodeName;if(m==="outerHTML"){if(!this.parentNode)return h();$=this.parentNode.nodeName}let B=i.createElement($==="TEMPLATE"?"div":$);x[m].set.call(B,p),E=this instanceof a?[]:[...B.childNodes],m==="outerHTML"?(p=new c,p.______isTemp=!0,p.append(...B.childNodes),h=()=>u.prototype.replaceWith.call(this,p)):this instanceof a?h=()=>this.content.replaceChildren(...B.childNodes):h=()=>u.prototype.replaceChildren.call(this,...B.childNodes)}return d({target:T,entrants:E,exits:A,type:"interception",event:[this,m]},h)}})}),["append","prepend","replaceChildren"].forEach(m=>{[i,c.prototype].forEach(y=>{let p=y[m];y[m]=function(...h){if(this.______isTemp)return p.call(this,...h);let A=m==="replaceChildren"?[...this.childNodes]:[];return d({target:this,entrants:h,exits:A,type:"interception",event:[this,m]},()=>p.call(this,...h))}})}),l}function ft(){kt.call(this),Rt.call(this),Lt.call(this)}function kt(){let r=this;r.CSS||(r.CSS={}),r.CSS.escape||(r.CSS.escape=e=>e.replace(/([\:@\~\$\&])/g,"\\$1"))}function Rt(){let r=this;"isConnected"in r.Node.prototype||Object.defineProperty(r.Node.prototype,"isConnected",{get:function(){return!this.ownerDocument||!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}function Lt(){let r=this;r.Element.prototype.matches||(r.Element.prototype.matches=r.Element.prototype.matchesSelector||r.Element.prototype.mozMatchesSelector||r.Element.prototype.msMatchesSelector||r.Element.prototype.oMatchesSelector||r.Element.prototype.webkitMatchesSelector||function(e){for(var n=(this.document||this.ownerDocument).querySelectorAll(e),t=n.length;--t>=0&&n.item(t)!==this;);return t>-1})}function ut(){let r=this;if(r.webqit||(r.webqit={}),r.webqit.realdom)return r.webqit.realdom;r.webqit.realdom={},ft.call(r),r.webqit.realdom.meta=(...n)=>$t.call(r,...n),r.webqit.realdom.ready=(...n)=>$e.call(r,...n),r.webqit.realdom.realtime=(n,t="dom")=>{if(t==="dom")return new se(n,r);if(t==="attr")return new L(n,r)};let e=new oe(r);return r.webqit.realdom.schedule=(n,...t)=>e[`on${n}`](...t),r.webqit.realdom}function $e(...r){let e="interactive",n;U(r[0])?(e=r[0],b(r[1])&&(n=r[1])):b(r[0])&&(n=r[0]);let t={interactive:["interactive","complete"],complete:["complete"]};if(!t[e])throw new Error(`Invalid ready-state timing: ${e}.`);let i=this;if(!n)return i.webqit.realdom.readyStatePromises||(i.webqit.realdom.readyStatePromises={interactive:new Promise(o=>$e.call(this,"interactive",o)),complete:new Promise(o=>$e.call(this,"complete",o))}),i.webqit.realdom.readyStatePromises[e];if(t[e].includes(i.document.readyState))return n(i);i.webqit.realdom.readyStateCallbacks||(i.webqit.realdom.readyStateCallbacks={interactive:[],complete:[]},i.document.addEventListener("readystatechange",()=>{let o=i.document.readyState;for(let s of i.webqit.realdom.readyStateCallbacks[o].splice(0))s(i)},!1)),i.webqit.realdom.readyStateCallbacks[e].push(n)}function $t(r){let e=this,n={},t;return(t=e.document.querySelector(`meta[name="${r}"]`))&&(n=(t.content||"").split(";").filter(i=>i).reduce((i,o)=>{let s=o.split("=").map(u=>u.trim());return Re(i,s[0].split("."),s[1]==="true"?!0:s[1]==="false"?!1:S(s[1])?parseInt(s[1]):s[1]),i},{})),{get name(){return r},get content(){return t.content},json(){return JSON.parse(JSON.stringify(n))}}}var ge=(...r)=>F("oohtml",...r);function ct(r,e,n){let t=r.toUpperCase().replace("-","_"),i=this,o=ut.call(i);return i.webqit||(i.webqit={}),i.webqit.oohtml||(i.webqit.oohtml={}),i.webqit.oohtml.configs||(i.webqit.oohtml.configs={}),i.webqit.oohtml.configs[t]||(i.webqit.oohtml.configs[t]={}),ee(2,i.webqit.oohtml.configs[t],n,e,o.meta(r).json()),{config:i.webqit.oohtml.configs[t],realdom:o,window:i}}function Ve(r={}){let{config:e,window:n}=ct.call(this,"bindings-api",r,{api:{bind:"bind",bindings:"bindings"}});n.webqit.Observer=D,Nt.call(n,e)}function Ne(r){if(!ge(r).has("bindings")){let e=Object.create(null);ge(r).set("bindings",e)}return ge(r).get("bindings")}function Nt(r){let e=this;if(r.api.bind in e.document)throw new Error(`document already has a "${r.api.bind}" property!`);if(r.api.bindings in e.document)throw new Error(`document already has a "${r.api.bindings}" property!`);if(r.api.bind in e.Element.prototype)throw new Error(`The "Element" class already has a "${r.api.bind}" property!`);if(r.api.bindings in e.Element.prototype)throw new Error(`The "Element" class already has a "${r.api.bindings}" property!`);Object.defineProperty(e.document,r.api.bind,{value:function(n,t={}){return lt(e.document,n,t)}}),Object.defineProperty(e.document,r.api.bindings,{get:function(){return D.proxy(Ne(e.document))}}),Object.defineProperty(e.Element.prototype,r.api.bind,{value:function(n,t={}){return lt(this,n,t)}}),Object.defineProperty(e.Element.prototype,r.api.bindings,{get:function(){return D.proxy(Ne(this))}})}function lt(r,e,{merge:n,diff:t,namespace:i}={}){let o=Ne(r),s={diff:t,namespace:i};if(n)return D.set(o,e,s);let u=D.ownKeys(o,s).filter(f=>!(f in e));return D.batch(o,()=>(u.length&&D.deleteProperty(o,u,s),D.set(o,e,s)),s)}Ve.call(window);})();
//# sourceMappingURL=bindings-api.js.map
