(()=>{var Ct=Object.defineProperty;var Ze=(e,t)=>{for(var n in t)Ct(e,n,{get:t[n],enumerable:!0})};var We={};Ze(We,{apply:()=>Le,construct:()=>qe,deep:()=>Gt,defineProperties:()=>Xt,defineProperty:()=>Re,deleteProperty:()=>Fe,get:()=>k,getOwnPropertyDescriptor:()=>je,getOwnPropertyDescriptors:()=>Jt,getPrototypeOf:()=>Ne,has:()=>he,intercept:()=>Qt,isExtensible:()=>Me,observe:()=>kt,ownKeys:()=>de,preventExtensions:()=>De,set:()=>ee,setPrototypeOf:()=>He});function A(e){return!Array.isArray(e)&&typeof e=="object"&&e}function K(e){return typeof e}function E(e,...t){globalThis.WebQitInternalsRegistry||(globalThis.WebQitInternalsRegistry=new Map);var n=globalThis.WebQitInternalsRegistry.get(e);if(!n){if(n=new Map,t[0]===!1)return n;globalThis.WebQitInternalsRegistry.set(e,n)}for(var r,o;r=t.shift();)if((o=n)&&!(n=n.get(r))){if(n=new Map,t[0]===!1)return n;o.set(r,n)}return n}function j(e){return Array.isArray(e)}function B(e){return typeof e=="function"}function ve(e){return B(e)&&/^class\s?/.test(Function.prototype.toString.call(e))}function Ae(e){return e===null||e===""}function V(e){return arguments.length&&(e===void 0||typeof e>"u")}function S(e){return Array.isArray(e)||typeof e=="object"&&e||B(e)}function Ee(e){return Ae(e)||V(e)||e===!1||e===0||S(e)&&!Object.keys(e).length}function N(e){return B(e)||e&&{}.toString.call(e)==="[object function]"}function ae(e){return e instanceof String||typeof e=="string"&&e!==null}function Te(e){return!ae(e)&&!V(e.length)}function W(e,t=!0){return j(e)?e:!t&&A(e)?[e]:e!==!1&&e!==0&&Ee(e)?[]:Te(e)?Array.prototype.slice.call(e):A(e)?Object.values(e):[e]}var z=class{constructor(t,n){this.registry=t,Object.assign(this,{...n,target:t.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var ne=class extends z{constructor(){super(...arguments),Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal})}remove(){this.abortController.abort(),super.remove()}fire(t){let n=t,r=this.filter;if(r!==1/0&&(r=W(r))&&(n=t.filter(o=>r.includes(o.key))),n.length)return this.filter===1/0||Array.isArray(this.filter)?this.handler(n,this):this.handler(n[0],this)}};var U=class{constructor(t){this.target=t,this.entries=[]}addRegistration(t){return this.entries.push(t),t}removeRegistration(t){this.entries=this.entries.filter(n=>n!==t)}static _getInstance(t,n,r=!0,o=this.__namespace){if(!S(n))throw new Error(`Subject must be of type object; "${K(n)}" given!`);let i=this;return o&&globalThis.WebQitObserverNamespaceRegistry.has(t+"-"+o)&&(i=globalThis.WebQitObserverNamespaceRegistry.get(t+"-"+o),t+="-"+o),!E(n,"observerApi").has(t)&&r&&E(n,"observerApi").set(t,new i(n)),E(n,"observerApi").get(t)}static _namespace(t,n,r=null){if(t+="-"+n,arguments.length===2)return globalThis.WebQitObserverNamespaceRegistry.get(t);if(!(r.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${n} must be a subclass of ${this.name}.`);globalThis.WebQitObserverNamespaceRegistry.set(t,r),r.__namespace=n}};globalThis.WebQitObserverNamespaceRegistry||(globalThis.WebQitObserverNamespaceRegistry=new Map);var G=class extends U{static getInstance(t,n=!0,r=null){return super._getInstance("listeners",...arguments)}static namespace(t,n=null){return super._namespace("listeners",...arguments)}addRegistration(t,n,r){return super.addRegistration(new ne(this,{filter:t,handler:n,params:r}))}emit(t){this.entries.forEach(n=>n.fire(t))}};var oe=class extends z{exec(t,n,r){return this.running||!this.traps[t.type]?n(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[t.type](t,r,(...o)=>(this.running=!1,n(...o))))}};var q=class extends U{static getInstance(t,n=!0,r=null){return super._getInstance("traps",...arguments)}static namespace(t,n=null){return super._namespace("traps",...arguments)}addRegistration(t){return super.addRegistration(new oe(this,t))}emit(t,n=null){let r=this;return function o(i,...f){let l=r.entries[i];return l?l.exec(t,(...s)=>o(i+1,...s),...f):n?n(t,...f):f[0]}(0)}};var M=class{constructor(t,n){if(this.target=t,!n.type)throw new Error("Descriptor type must be given in definition!");Object.assign(this,n)}};var Ie={};Ze(Ie,{accessorize:()=>Vt,proxy:()=>Ut,unaccessorize:()=>zt,unproxy:()=>pe});function Vt(e,t,n={}){e=Se(e);let r=E(e,"accessorizedProps");function o(s){let c,u=e;for(;!c&&(u=Object.getPrototypeOf(u));)c=Object.getOwnPropertyDescriptor(u,s);return c?{proto:u,descriptor:c}:{descriptor:{value:void 0}}}function i(s){if(r.has(s))return!0;let c=o(s);c.getValue=function(){return"get"in this.descriptor?this.descriptor.get():this.descriptor.value},c.setValue=function(g){return"set"in this.descriptor?this.descriptor.set(g):this.descriptor.value=g},c.intact=function(){let g=Object.getOwnPropertyDescriptor(e,s);return g.get===h.get&&g.set===h.set&&r.get(s)===this},c.restore=function(){return this.intact()?(this.proto!==e?delete e[s]:Object.defineProperty(e,s,this.descriptor),r.delete(s),!0):!1},r.set(s,c);let{enumerable:u=!0,configurable:m=!0}=c.descriptor,h={enumerable:u,configurable:m};["value","set"].some(g=>g in c.descriptor)&&(h.set=function(g){return ee(this,s,g,n)}),["value","get"].some(g=>g in c.descriptor)&&(h.get=function(){return k(this,s,n)});try{return Object.defineProperty(e,s,h),!0}catch{return r.delete(s),!1}}let l=(Array.isArray(t)?t:t===void 0?Object.keys(e):[t]).map(i);return t===void 0||Array.isArray(t)?l:l[0]}function zt(e,t,n={}){e=Se(e);let r=E(e,"accessorizedProps");function o(l){return r.has(l)?r.get(l).restore():!0}let f=(Array.isArray(t)?t:t===void 0?Object.keys(e):[t]).map(o);return t===void 0||Array.isArray(t)?f:f[0]}function Ut(e,t={}){e=Se(e);let n=new Proxy(e,{apply:(r,o,i)=>Le(r,o,i,t),construct:(r,o,i=null)=>qe(r,o,i,t),defineProperty:(r,o,i)=>Re(r,o,i,t),deleteProperty:(r,o)=>Fe(r,o,t),get:(r,o,i=null)=>{let f=k(r,o,{...t,receiver:i});return t.proxyAutoBinding!==!1&&N(f)&&!ve(f)?f.bind(n):f},getOwnPropertyDescriptor:(r,o)=>je(r,o,t),getPrototypeOf:r=>Ne(r,t),has:(r,o)=>he(r,o,t),isExtensible:r=>Me(r,t),ownKeys:r=>de(r,t),preventExtensions:r=>De(r,t),set:(r,o,i,f=null)=>ee(r,o,i,{...t,receiver:f}),setPrototypeOf:(r,o)=>He(r,o,t)});return E(n).set(n,e),n}function pe(e){return E(e,!1).get(e)||e}function Se(e){if(!e||!S(e))throw new Error("Target must be of type object!");return pe(e)}function Gt(e,t,n,r=i=>i,o={}){return function i(f,l,s){let c=l[s.level];return s.level<l.length-1?s={...s,preflight:!0}:s={...s,preflight:o.preflight},n(f,c,(u,...m)=>{let h=(d={})=>({...s,...d,level:s.level+1}),g=d=>{d instanceof M&&(d.path=[d.key],f instanceof M&&(d.path=f.path.concat(d.key),d.context=f))};if(ge(c)&&Array.isArray(u))return u.forEach(g),s.level===l.length-1||!u.length&&s.midwayResults?r(u,...m):u.map(d=>i(d,l,h(...m)));g(u);let a=S(Q(u,!1));return s.level===l.length-1||!a&&s.midwayResults?r(u,...m):a&&i(u,l,h(...m))},s)}(e,t.slice(0),{...o,level:0})}function kt(e,t,n,r={}){if(e=Q(e),N(arguments[1])&&([,n,r={}]=arguments,t=1/0),!N(n))throw new Error(`Handler must be a function; "${K(n)}" given!`);let o=ot(e,t,n,r);return r.preflight?(r={...r,descripted:!0},delete r.live,k(e,t,o,r)):o()}function Qt(e,t,n={}){return e=Q(e),A(t)||([,,,n={}]=arguments,t={[arguments[1]]:arguments[2]}),q.getInstance(e,!0,n.namespace).addRegistration({traps:t,params:n})}function je(e,t,n=o=>o,r={}){return R(e,"getOwnPropertyDescriptor",{key:t},n,r)}function Jt(e,t,n=o=>o,r={}){return R(e,"getOwnPropertyDescriptors",{key:t},n,r)}function Ne(e,t=r=>r,n={}){return R(e,"getPrototypeOf",{},t,n)}function Me(e,t=r=>r,n={}){return R(e,"isExtensible",{},t,n)}function de(e,t=r=>r,n={}){return R(e,"ownKeys",{},t,n)}function he(e,t,n=o=>o,r={}){return R(e,"has",{key:t},n,r)}function k(e,t,n=o=>o,r={}){let o;return e=Q(e),A(n)?[r,n]=[n,i=>i]:r.live&&(o=!0),Yt(e,t,i=>{let f=[...i];return function l(s,c,u){if(!c.length)return u(s);let m=c.shift();function h(d,p=void 0){let y=v=>(d.value=v,l(s.concat(r.live||r.descripted?d:v),c,u));if(arguments.length>1)return y(p);let x=E(e,"accessorizedProps",!1),O=x&&x.get(d.key);return O&&O.intact()?y(O.getValue()):y(Reflect.get(e,d.key,...r.receiver?[r.receiver]:[]))}let g=new M(e,{type:"get",key:m,value:void 0,related:f}),a=q.getInstance(e,!1,r.namespace);return a?a.emit(g,h):h(g)}([],i.slice(0),l=>{let s=ge(t)?l:l[0];return o?ot(e,t,n,r)(s):n(s)})})}function ee(e,t,n,r=f=>f,o={},i=!1){e=Q(e);let f=[[t,n]];A(t)&&([,,r=s=>s,o={},i=!1]=arguments,f=Object.entries(t)),A(r)&&([i,o,r]=[typeof o=="boolean"?o:!1,r,s=>s]);let l=f.map(([s])=>s);return function s(c,u,m){if(!u.length)return m(c);let[h,g]=u.shift();function a(p,y=void 0){let x=Z=>(p.status=Z,s(c.concat(p),u,m));if(arguments.length>1)return x(p,y);let O=E(e,"accessorizedProps",!1),v=O&&O.get(p.key);return p.type==="defineProperty"?(v&&!v.restore()&&x(!1),Object.defineProperty(e,p.key,p.value),x(!0)):v&&v.intact()?x(v.setValue(p.value)):x(Reflect.set(e,p.key,p.value))}function d(p,y){let x=new M(e,{type:i?"defineProperty":"set",key:h,value:g,isUpdate:p,oldValue:y,related:[...l],detail:o.detail}),O=q.getInstance(e,!1,o.namespace);return O?O.emit(x,a):a(x)}return he(e,h,p=>!p||o.oldValue!==!0?d(p):k(e,h,y=>d(p,y),o),o)}([],f.slice(0),s=>{let c=G.getInstance(e,!1,o.namespace);return c&&c.emit(s),r(ge(t)?s.map(u=>u.status):s[0].status)})}function Re(e,t,n,r=i=>i,o={}){return ee(e,t,n,r,o,!0)}function Xt(e,t,n=o=>o,r={}){return ee(e,t,n,r,!0)}function Fe(e,t,n=o=>o,r={}){e=Q(e),A(n)&&([r,n]=[n,f=>f]);let o=W(t),i=[...o];return function f(l,s,c){if(!s.length)return c(l);let u=s.shift();function m(g,a=void 0){let d=x=>(g.status=x,f(l.concat(g),s,c));if(arguments.length>1)return d(g,a);let p=E(e,"accessorizedProps",!1),y=p&&p.get(g.key);return y&&!y.restore()&&d(!1),d(Reflect.deleteProperty(e,g.key))}function h(g){let a=new M(e,{type:"deleteProperty",key:u,oldValue:g,related:[...i],detail:r.detail}),d=q.getInstance(e,!1,r.namespace);return d?d.emit(a,m):m(a)}return r.oldValue===!1?h():k(e,u,h,r)}([],o.slice(0),f=>{let l=G.getInstance(e,!1,r.namespace);return l&&l.emit(f),n(ge(t)?f.map(s=>s.status):f[0].status)})}function qe(e,t,n=null,r=i=>i,o={}){return R(e,"construct",arguments.length>2?{argumentsList:t,newTarget:n}:{argumentsList:t},r,o)}function Le(e,t,n,r=i=>i,o={}){return R(e,"apply",{thisArgument:t,argumentsList:n},r,o)}function He(e,t,n=o=>o,r={}){return R(e,"setPrototypeOf",{proto:t},n,r)}function De(e,t=r=>r,n={}){return R(e,"preventExtensions",{},t,n)}function ot(e,t,n,r={}){let o;r.signal||(o=new AbortController,r={...r,signal:o.signal});let i=G.getInstance(e,!0,r.namespace);return function f(l,s=null){s?.remove();let u={signal:i.addRegistration(t,f,r).signal};return arguments.length&&n(l,u),o}}function R(e,t,n={},r=i=>i,o={}){e=Q(e),A(r)&&([o,r]=[r,s=>s]);function i(s,c){return arguments.length>1?r(c):r(Reflect[t](e,...Object.values(n)))}let f=new M(e,{type:t,...n}),l=q.getInstance(e,!1,o.namespace);return l?l.emit(f,i):i(f)}function ge(e){return e===1/0||Array.isArray(e)}function Q(e,t=!0){if((!e||!S(e))&&t)throw new Error(`Object must be of type object or array! "${K(e)}" given.`);return e instanceof M&&(e=e.value),e&&pe(e)}function Yt(e,t,n){return t===1/0?de(e,n):n(W(t))}var Zt={...We,...Ie},C=Zt;function w(e){return!Array.isArray(e)&&typeof e=="object"&&e}function ye(e,...t){globalThis.WebQitInternalsRegistry||(globalThis.WebQitInternalsRegistry=new Map);var n=globalThis.WebQitInternalsRegistry.get(e);if(!n){if(n=new Map,t[0]===!1)return n;globalThis.WebQitInternalsRegistry.set(e,n)}for(var r,o;r=t.shift();)if((o=n)&&!(n=n.get(r))){if(n=new Map,t[0]===!1)return n;o.set(r,n)}return n}function _(e){return Array.isArray(e)}function te(e){return typeof e=="function"}function ie(e){return e===null||e===""}function L(e){return arguments.length&&(e===void 0||typeof e>"u")}function T(e){return Array.isArray(e)||typeof e=="object"&&e||te(e)}function $e(e){return ie(e)||L(e)||e===!1||e===0||T(e)&&!Object.keys(e).length}function b(e){return te(e)||e&&{}.toString.call(e)==="[object function]"}function fe(e){return e instanceof Number||typeof e=="number"}function I(e){return fe(e)||e!==!0&&e!==!1&&e!==null&&e!==""&&!isNaN(e*1)}function _e(e){return e instanceof String||typeof e=="string"&&e!==null}function Be(e){return!_e(e)&&!L(e.length)}function xe(e,...t){return t.forEach(n=>{e.indexOf(n)<0&&e.push(n)}),e}function Ve(r,t){t=t||Object.prototype,t=t&&!_(t)?[t]:t;for(var n=[],r=r;r&&(!t||t.indexOf(r)<0)&&r.name!=="default";)n.push(r),r=r?Object.getPrototypeOf(r):null;return n}function ze(e,t){var n=[];return Ve(e,t).forEach(r=>{xe(n,...Object.getOwnPropertyNames(r))}),n}function F(e,t,n=!1,r=!1,o=!1){var i=0,f=e.shift();if((I(f)||f===!0||f===!1)&&(i=f,f=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach((l,s)=>{!T(l)&&!b(l)||(n?ze(l):Object.keys(l)).forEach(c=>{if(!!t(c,f,l,s)){var u=f[c],m=l[c];if((_(u)&&_(m)||w(u)&&w(m))&&(i===!0||i>0))f[c]=_(u)&&_(m)?[]:{},F([I(i)?i-1:i,f[c],u,m],t,n,r,o);else if(_(f)&&_(l))r?f[c]=m:f.push(m);else try{o?Object.defineProperty(f,c,Object.getOwnPropertyDescriptor(l,c)):f[c]=l[c]}catch{}}})}),f}function se(...e){return F(e,(t,n,r)=>!0,!1,!1,!1)}function P(e,t=!0){return _(e)?e:!t&&w(e)?[e]:e!==!1&&e!==0&&$e(e)?[]:Be(e)?Array.prototype.slice.call(e):w(e)?Object.values(e):[e]}function J(e,t,n={},r={}){t=P(t).slice();for(var o=e;!L(o)&&!ie(o)&&t.length;){var i=t.shift();if(!(n.get?n.get(o,i):T(o)?i in o:o[i])){r.exists=!1;return}o=n.get?n.get(o,i):o[i]}return r.exists=!0,o}function Ge(e,t,n,r={},o={}){let i=(u,m,h)=>o.set?o.set(u,m,h):(I(t[l])&&_(u)?u.push(h):u[m]=h,!0);t=P(t);for(var f=e,l=0;l<t.length;l++)if(l<t.length-1){if(!f||!T(f)&&!b(f))return!1;var s=J(f,t[l],o);if(!T(s)){if(o.buildTree===!1)return!1;s=b(o.buildTree)?o.buildTree(l):I(t[l+1])?[]:{};var c=i(f,t[l],s);if(!c)return!1}f=s}else return i(f,t[l],n)}var ct=e=>class{constructor(n=!0){Object.defineProperty(this,"window",{value:e}),Object.defineProperty(this,"readCallbacks",{value:new Set}),Object.defineProperty(this,"writeCallbacks",{value:new Set}),this.async=n,this.window.requestAnimationFrame?this._run():this.async=!1}_run(){this.window.requestAnimationFrame(()=>{this.readCallbacks.forEach(n=>{n()||this.readCallbacks.delete(n)}),this.writeCallbacks.forEach(n=>{n()||this.writeCallbacks.delete(n)}),this._run()})}onread(n,r=!1){if(r)return new Promise((o,i)=>{this.async===!1?n(o,i):this.readCallbacks.add(()=>{n(o,i)})});this.async===!1?n():this.readCallbacks.add(n)}onwrite(n,r=!1){if(r)return new Promise((o,i)=>{this.async===!1?n(o,i):this.writeCallbacks.add(()=>{n(o,i)})});this.async===!1?n():this.writeCallbacks.add(n)}cycle(n,r,o){this.onread(()=>{let i=n(o),f=l=>{l!==void 0&&this.onwrite(()=>{let s=r(l,o),c=u=>{u!==void 0&&this.cycle(n,r,u)};s instanceof Promise?s.then(c):c(s)})};i instanceof Promise?i.then(f):f(i)})}};var X=class{constructor(t,n,r){this.context=t,this.namespace=n,this.window=t.defaultView||t.ownerDocument?.defaultView||r,this.document=this.window.document,this.wq=this.window.wq,Object.defineProperty(this,"#",{value:{}})}resolveArgs(t){return b(t[0])?t=[[],...t]:w(t[0])&&t.length===1?t=[[],void 0,t[0]]:w(t[1])&&t.length===2?t=[P(t[0],!1),void 0,t[1]]:t[0]=P(t[0],!1),t}registry(...t){return ye(this.window,"dom.realtime",this.namespace,...t)}createSignalGenerator(){return{generate(){return this.lastController?.abort(),this.lastController=new AbortController,{signal:this.lastController.signal}},disconnect(){this.lastController?.abort()}}}forEachMatchingContext(t,n,r){let{window:o}=this,i=Array.isArray(n)?n:[n],f=new Set;for(let[l,s]of this.registry(t))for(let[c,u]of s){let m=i.filter(h=>c.contains(h.target)?l==="subtree"||h.target===c:!1);if(!!m.length){Array.isArray(n)||(m=m[0]);for(let h of u)f.add([h,m,c])}}for(let[l,s,c]of f)r.call(this,l,s,c)}disconnectables(t,...n){let r={disconnect(){n.forEach(o=>o&&b(o.disconnect)&&o.disconnect()||b(o)&&o()||w(o)&&(o.disconnected=!0))}};return t&&t.addEventListener("abort",()=>r.disconnect()),r}};var H=class extends X{constructor(t,...n){super(t,"attr",...n)}get(t,n=void 0,r={}){let o=typeof t=="string";[t=[],n=void 0,r={}]=this.resolveArgs(arguments);let{context:i}=this,f=ht(i,t),l=o?f[0]:f;if(!n)return l;let s=n&&r.lifecycleSignals&&this.createSignalGenerator(),c=s?.generate()||{};if(n(l,c,i),r.live){s&&(r={...r,signalGenerator:s});let u=this.observe(o?t[0]:t,n,{newValue:!0,...r});return this.disconnectables(r.signal,u)}}observe(t,n,r={}){let o=typeof t=="string";if([t=[],n,r={}]=this.resolveArgs(arguments),["sync","intercept"].includes(r.timing))return this.observeSync(o?t[0]:t,n,r);if(r.timing&&r.timing!=="async")throw new Error(`Timing option "${r.timing}" invalid.`);let{context:i,window:f,wq:l}=this;r.eventDetails&&!l.attrInterceptionHooks?.intercepting&&pt.call(f,"intercept",()=>{});let s=new f.MutationObserver(h=>{h=dt(h).map(g=>gt.call(f,g)),at.call(f,m,h,i)}),c={attributes:!0,attributeOldValue:r.oldValue,subtree:r.subtree};t.length&&(c.attributeFilter=t),s.observe(i,c);let u=r.signalGenerator||r.lifecycleSignals&&this.createSignalGenerator(),m={context:i,filter:t,callback:n,params:r,atomics:new Map,originalFilterIsString:o,signalGenerator:u,disconnectable:s};return this.disconnectables(r.signal,s,u)}observeSync(t,n,r={}){let o=typeof t=="string";[t,n,r={}]=this.resolveArgs(arguments);let{context:i,window:f}=this;if(r.timing&&!["sync","intercept"].includes(r.timing))throw new Error(`Timing option "${r.timing}" invalid.`);let l=r.timing==="intercept"?"intercept":"sync",s=r.subtree?"subtree":"children";this.registry(l).size||pt.call(f,l,a=>{this.forEachMatchingContext(l,a,at)});let c={disconnect(){g.delete(m),g.size||h.delete(i)}},u=r.signalGenerator||r.lifecycleSignals&&this.createSignalGenerator(),m={context:i,filter:t,callback:n,params:r,atomics:new Map,originalFilterIsString:o,signalGenerator:u,disconnectable:c},h=this.registry(l,s);h.has(i)||h.set(i,new Set);let g=h.get(i);return g.add(m),this.disconnectables(r.signal,c,u)}};function dt(e){return e.reduce((t,n,r)=>t[r-1]?.attributeName===n.attributeName?t:t.concat(n),[])}function at(e,t){let{context:n,filter:r,callback:o,params:i,atomics:f,originalFilterIsString:l,signalGenerator:s}=e;i.atomic&&!f.size&&(t=ht(n,r,t)),i.newValue===null&&i.oldValue===null||(t=t.map(m=>{let h;return!i.oldValue&&"oldValue"in m&&({oldValue:h,...m}=m),!i.newValue&&"value"in m?{value:h,...m}=m:i.newValue&&typeof m.value>"u"&&(m={...m,value:m.target.getAttribute(m.name)}),m})),i.atomic&&(t.forEach(m=>f.set(m.name,m)),t=Array.from(f.entries()).map(([,m])=>m));let c=l?t[0]:t,u=s?.generate()||{};o(c,u,n)}function ht(e,t,n=[]){let r={event:null,type:"attribute"};return t.length?t.map(i=>n.find(f=>f.name===i)||{target:e,name:i,value:e.getAttribute(i),...r}):Array.from(e.attributes).map(i=>n.find(f=>f.name===i.nodeName)||{target:e,name:i.nodeName,value:i.nodeValue,...r})}function gt({target:e,attributeName:t,value:n,oldValue:r}){let f=(this.wq.attrInterceptionRecords?.get(e)||{})[t]||"mutation";return{target:e,name:t,value:n,oldValue:r,type:"observation",event:f}}function pt(e,t){let n=this,{wq:r,document:o,Element:i}=n;r.attrInterceptionHooks||(r.attrInterceptionHooks=new Map),r.attrInterceptionHooks.has(e)||r.attrInterceptionHooks.set(e,new Set),r.attrInterceptionHooks.get(e).add(t);let f=()=>r.attrInterceptionHooks.get(e).delete(t);if(r.attrInterceptionHooks?.intercepting)return f;console.warn("Attr mutation APIs are now being intercepted."),r.attrInterceptionHooks.intercepting=!0,r.attrInterceptionRecords=new Map;let l=(u,m)=>{r.attrInterceptionRecords.has(u.target)||r.attrInterceptionRecords.set(u.target,{});let h=r.attrInterceptionRecords.get(u.target);clearTimeout(h[u.name]?.timeout),h[u.name]=u.event;let g=setTimeout(()=>{delete h[u.name]},0);Object.defineProperty(u.event,"timeout",{value:g,configurable:!0}),r.attrInterceptionHooks.get("intercept")?.forEach(d=>d([u]));let a=m();return r.attrInterceptionHooks.get("sync")?.forEach(d=>d([u])),a};new n.MutationObserver(u=>{u=dt(u).map(m=>gt.call(n,m)).filter((m,h)=>!Array.isArray(m.event)),u.length&&(r.attrInterceptionHooks.get("intercept")?.forEach(m=>m(u)),r.attrInterceptionHooks.get("sync")?.forEach(m=>m(u)))}).observe(o,{attributes:!0,subtree:!0,attributeOldValue:!0});let c=Object.create(null);return["setAttribute","removeAttribute","toggleAttribute"].forEach(u=>{c[u]=i.prototype[u],i.prototype[u]=function(...m){let h,g=this.getAttribute(m[0]);["setAttribute","toggleAttribute"].includes(u)&&(h=m[1]),u==="toggleAttribute"&&h===void 0&&(h=g===null);let a={target:this,name:m[0],value:h,oldValue:g,type:"interception",event:[this,u]};return l(a,()=>c[u].call(this,...m))}}),f}var re=class extends X{constructor(t,...n){super(t,"tree",...n)}attr(t,n=void 0,r={}){let{context:o,window:i}=this;return new H(o,i).get(...arguments)}query(t,n=void 0,r={}){[t,n=void 0,r={}]=this.resolveArgs(arguments);let{context:o}=this,i=new Map,f=c=>(i.has(c)||i.set(c,{target:c,entrants:[],exits:[],type:"query",event:null}),i.get(c));if((!r.generation||r.generation==="entrants")&&(t.length?t.every(c=>typeof c=="string")&&(t=t.join(","))&&(r.subtree?o.querySelectorAll(t):[...o.children].filter(u=>u.matches(t))).forEach(u=>f(u.parentNode||o).entrants.push(u)):[...o.children].forEach(c=>f(o).entrants.push(c))),!n)return i;let l={disconnected:!1},s=n&&r.lifecycleSignals&&this.createSignalGenerator();for(let[,c]of i){if(l.disconnected)break;let u=s?.generate()||{};n(c,u,o)}if(r.live){s&&(r={...r,signalGenerator:s});let c=this.observe(t,n,r);return this.disconnectables(r.signal,l,c)}return this.disconnectables(r.signal,l,s)}children(t,n=void 0,r={}){return[t,n=void 0,r={}]=this.resolveArgs(arguments),this.query(t,n,{...r,subtree:!1})}subtree(t,n=void 0,r={}){return[t,n=void 0,r={}]=this.resolveArgs(arguments),this.query(t,n,{...r,subtree:!0})}observe(t,n,r={}){if([t,n,r={}]=this.resolveArgs(arguments),["sync","intercept"].includes(r.timing))return this.observeSync(t,n,r);if(r.timing&&r.timing!=="async")throw new Error(`Timing option "${r.timing}" invalid.`);let{context:o,window:i,wq:f,document:l}=this;r.eventDetails&&(f.domInterceptionRecordsAlwaysOn=!0),(l.readyState==="loading"||f.domInterceptionRecordsAlwaysOn)&&!f.domInterceptionHooks?.intercepting&&xt.call(i,"sync",()=>{});let s=new i.MutationObserver(m=>m.forEach(h=>{_t.call(i,u,Ot.call(i,h),o)}));s.observe(o,{childList:!0,subtree:r.subtree});let c=r.signalGenerator||r.lifecycleSignals&&this.createSignalGenerator(),u={context:o,selectors:t,callback:n,params:r,signalGenerator:c,disconnectable:s};if(r.staticSensitivity){let m=yt.call(i,u);return this.disconnectables(r.signal,s,c,m)}return this.disconnectables(r.signal,s,c)}observeSync(t,n,r={}){[t,n,r={}]=this.resolveArgs(arguments);let{context:o,window:i}=this;if(r.timing&&!["sync","intercept"].includes(r.timing))throw new Error(`Timing option "${r.timing}" invalid.`);let f=r.timing==="intercept"?"intercept":"sync",l=r.subtree?"subtree":"children";this.registry(f).size||xt.call(i,f,g=>{this.forEachMatchingContext(f,g,_t)});let s={disconnect(){h.delete(u),h.size||m.delete(o)}},c=r.signalGenerator||r.lifecycleSignals&&this.createSignalGenerator(),u={context:o,selectors:t,callback:n,params:r,signalGenerator:c,disconnectable:s},m=this.registry(f,l);m.has(o)||m.set(o,new Set);let h=m.get(o);if(h.add(u),r.staticSensitivity){let g=yt.call(i,u);return this.disconnectables(r.signal,s,c,g)}return this.disconnectables(r.signal,s,c)}};function yt(e){let t=this,{context:n,selectors:r,callback:o,params:i,signalGenerator:f}=e,l=u=>[...u.matchAll(/\[([^\=\]]+)(\=[^\]]+)?\]/g)].map(m=>m[1]);if(!(e.$attrs=r.filter(u=>typeof u=="string"&&u.includes("[")).reduce((u,m)=>u.concat(l(m)),[])).length)return;let s=new Set,c=new Set;return s.push=u=>(c.delete(u),s.add(u)),c.push=u=>(s.delete(u),c.add(u)),e.$deliveryCache={entrants:s,exits:c},new H(n,t).observe(e.$attrs,u=>{let m=new Map,h=d=>(m.has(d)||m.set(d,{target:d,entrants:[],exits:[],type:"static",event:null}),m.get(d)),g=new WeakMap,a=d=>(g.has(d)||g.set(d,r.some(p=>d.matches(p))),g.get(d));for(let d of u)["entrants","exits"].forEach(p=>{i.generation&&p!==i.generation||e.$deliveryCache[p].has(d.target)||(p==="entrants"?!a(d.target):a(d.target))||(e.$deliveryCache[p].push(d.target),h(d.target)[p].push(d.target),h(d.target).event=d.event)});for(let[,d]of m){let p=f?.generate()||{};o(d,p,n)}},{subtree:i.subtree,timing:i.timing,eventDetails:i.eventDetails})}function _t(e,t){let{context:n,selectors:r,callback:o,params:i,signalGenerator:f,$deliveryCache:l}=e,s={...t,entrants:[],exits:[]};if(["entrants","exits"].forEach(u=>{if(!(i.generation&&u!==i.generation)&&(r.length?s[u]=pr(r,t[u],t.event!=="parse"):s[u]=[...t[u]],!!l))for(let m of s[u])l[u].push(m)}),!s.entrants.length&&!s.exits.length)return;let c=f?.generate()||{};o(s,c,n)}function pr(e,t,n){t=Array.isArray(t)?t:[...t];let r=(o,i)=>{if(o=o.filter(f=>f.matches),typeof i=="string"){let f=o.filter(l=>l.matches(i));if(n&&(f=o.reduce((l,s)=>[...l,...s.querySelectorAll(i)],f)),f.length)return f}else if(o.includes(i)||n&&o.some(f=>f.contains(i)))return[i]};return t.$$searchCache||(t.$$searchCache=new Map),e.reduce((o,i)=>{let f;return t.$$searchCache.has(i)?f=t.$$searchCache.get(i):(f=r(t,i)||[],w(i)&&t.$$searchCache.set(i,f)),o.concat(f)},[])}function Ot({target:e,addedNodes:t,removedNodes:n}){let r=this,o;return o=P(t).reduce((i,f)=>i||r.wq.domInterceptionRecords?.get(f),null),o=P(n).reduce((i,f)=>i||r.wq.domInterceptionRecords?.get(f),o),o=o||r.document.readyState==="loading"&&"parse"||"mutation",{target:e,entrants:t,exits:n,type:"observation",event:o}}function xt(e,t){let n=this,{wq:r,document:o,Node:i,Element:f,HTMLElement:l,HTMLTemplateElement:s,DocumentFragment:c}=n;r.domInterceptionHooks||(r.domInterceptionHooks=new Map),r.domInterceptionHooks.has(e)||r.domInterceptionHooks.set(e,new Set),r.domInterceptionHooks.get(e).add(t);let u=()=>r.domInterceptionHooks.get(e).delete(t);if(r.domInterceptionHooks?.intercepting)return u;console.warn("DOM mutation APIs are now being intercepted."),r.domInterceptionHooks.intercepting=!0,r.domInterceptionRecords=new Map;let m=()=>!0,h=(a,d)=>{m()?a.entrants.concat(a.exits).forEach(y=>{clearTimeout(r.domInterceptionRecords.get(y)?.timeout),r.domInterceptionRecords.set(y,a.event);let x=setTimeout(()=>{r.domInterceptionRecords.delete(y)},0);Object.defineProperty(a.event,"timeout",{value:x,configurable:!0})}):r.domInterceptionRecords.clear(),r.domInterceptionHooks.get("intercept")?.forEach(y=>y(a));let p=d();return r.domInterceptionHooks.get("sync")?.forEach(y=>y(a)),p};if(m()){let a=new n.MutationObserver(d=>d.forEach(p=>{Array.isArray((p=Ot.call(n,p)).event)||(r.domInterceptionHooks.get("intercept")?.forEach(y=>y(p)),r.domInterceptionHooks.get("sync")?.forEach(y=>y(p)))}));a.observe(o,{childList:!0,subtree:!0}),o.addEventListener("readystatechange",()=>!m()&&a.disconnect())}let g=Object.create(null);return["insertBefore","insertAdjacentElement","insertAdjacentHTML","setHTML","replaceChildren","replaceWith","remove","replaceChild","removeChild","before","after","append","prepend","appendChild"].forEach(a=>{let d=["insertBefore","replaceChild","removeChild","appendChild"].includes(a)?i:f;g[a]=d.prototype[a],g[a]&&(d.prototype[a]=function(...p){let y=()=>g[a].call(this,...p);if(!(this instanceof f||this instanceof c))return y();let x=[],O=[],v=this;["insertBefore"].includes(a)?O=[p[0]]:["insertAdjacentElement","insertAdjacentHTML"].includes(a)?(O=[p[1]],["beforebegin","afterend"].includes(p[0])&&(v=this.parentNode)):["setHTML","replaceChildren"].includes(a)?(x=[...this.childNodes],O=a==="replaceChildren"?[...p]:[p[0]]):["replaceWith","remove"].includes(a)?(x=[this],O=a==="replaceWith"?[...p]:[],v=this.parentNode):["replaceChild"].includes(a)?(x=[p[1]],O=[p[0]]):["removeChild"].includes(a)?x=[...p]:(O=[...p],["before","after"].includes(a)&&(v=this.parentNode));let Z=a;if(["insertAdjacentHTML","setHTML"].includes(a)){let D=this.nodeName;if(a==="insertAdjacentHTML"&&["beforebegin","afterend"].includes(p[0])){if(!this.parentNode)return g[a].call(this,...p);D=this.parentNode.nodeName}let me=o.createElement(D);g.setHTML.call(me,O[0],a==="setHTML"?p[1]:{}),O=[...me.childNodes],a==="insertAdjacentHTML"?(Z="insertAdjacentElement",p[1]=new c,p[1].______isTemp=!0,p[1].append(...me.childNodes)):(Z="replaceChildren",p=[...me.childNodes])}return h({target:v,entrants:O,exits:x,type:"interception",event:[this,a]},()=>g[Z].call(this,...p))})}),["outerHTML","outerText","innerHTML","innerText","textContent","nodeValue"].forEach(a=>{let d=["textContent","nodeValue"].includes(a)?i:["outerText","innerText"].includes(a)?l:f;g[a]=Object.getOwnPropertyDescriptor(d.prototype,a),Object.defineProperty(d.prototype,a,{...g[a],set:function(p){let y=()=>g[a].set.call(this,p);if(!(this instanceof f))return y();let x=[],O=[],v=this;if(["outerHTML","outerText"].includes(a)?(x=[this],v=this.parentNode):x=[...this.childNodes],["outerHTML","innerHTML"].includes(a)){let le=this.nodeName;if(a==="outerHTML"){if(!this.parentNode)return y();le=this.parentNode.nodeName}let D=o.createElement(le==="TEMPLATE"?"div":le);g[a].set.call(D,p),O=this instanceof s?[]:[...D.childNodes],a==="outerHTML"?(p=new c,p.______isTemp=!0,p.append(...D.childNodes),y=()=>g.replaceWith.call(this,p)):this instanceof s?y=()=>this.content.replaceChildren(...D.childNodes):y=()=>g.replaceChildren.call(this,...D.childNodes)}return h({target:v,entrants:O,exits:x,type:"interception",event:[this,a]},y)}})}),["append","prepend","replaceChildren"].forEach(a=>{[o,c.prototype].forEach(d=>{let p=d[a];d[a]=function(...y){if(this.______isTemp)return p.call(this,...y);let x=a==="replaceChildren"?[...this.childNodes]:[];return h({target:this,entrants:y,exits:x,type:"interception",event:[this,a]},()=>p.call(this,...y))}})}),u}function wt(){dr.call(this),hr.call(this),gr.call(this)}function dr(){let e=this;e.CSS||(e.CSS={}),e.CSS.escape||(e.CSS.escape=t=>t.replace(/([\:@\~\$\&])/g,"\\$1"))}function hr(){let e=this;"isConnected"in e.Node.prototype||Object.defineProperty(e.Node.prototype,"isConnected",{get:function(){return!this.ownerDocument||!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}function gr(){let e=this;e.Element.prototype.matches||(e.Element.prototype.matches=e.Element.prototype.matchesSelector||e.Element.prototype.mozMatchesSelector||e.Element.prototype.msMatchesSelector||e.Element.prototype.oMatchesSelector||e.Element.prototype.webkitMatchesSelector||function(t){for(var n=(this.document||this.ownerDocument).querySelectorAll(t),r=n.length;--r>=0&&n.item(r)!==this;);return r>-1})}function bt(){let e=this;if(e.wq||(e.wq={}),e.wq.dom)return e.wq.dom;e.wq.dom={},wt.call(e);let t=ct(e);return e.wq.dom.Reflow=new t,e.wq.dom.DOMRealtime=re,e.wq.dom.AttrRealtime=H,e.wq.dom.realtime=(n,r="tree")=>{if(r==="tree")return new re(n,e);if(r==="attr")return new H(n,e)},e.wq.dom.ready=yr.bind(e),e.wq.dom.meta=_r.bind(e),e.wq.dom}function yr(e){let t=this;t.document.readyState==="complete"?e(t):(t.document.domReadyCallbacks||(t.document.domReadyCallbacks=[],t.document.addEventListener("DOMContentLoaded",()=>{t.document.domReadyCallbacks.splice(0).forEach(n=>n(t))},!1)),t.document.domReadyCallbacks.push(e))}function _r(e,t=!1){let n=this,r={content:{}};return!(r.el=n.document.querySelector(`meta[name="${e}"]`))&&t&&(r.el=n.document.createElement("meta"),r.el.setAttribute("name",e),n.document.head.append(r.el)),r.el&&(r.content=(r.el.getAttribute("content")||"").split(";").filter(o=>o).reduce((o,i)=>{let f=i.split("=").map(l=>l.trim());return Ge(o,f[0].split("."),f[1]==="true"?!0:f[1]==="false"?!1:I(f[1])?parseInt(f[1]):f[1]),o},{})),r.get=function(o){return JSON.parse(JSON.stringify(J(this.content,o.split("."))))},r.copy=function(){return JSON.parse(JSON.stringify(this.content))},r.copyWithDefaults=function(...o){return o.length?se(!0,{},...o.reverse().concat(this.content)):this.copy()},r}function Y(e){return Array.isArray(e)}function At(e,t,n=null){return Y(t)?e.filter(r=>n?t.filter(o=>n(r,o)).length:t.indexOf(r)!==-1):[]}function be(e,...t){globalThis.WebQitInternalsRegistry||(globalThis.WebQitInternalsRegistry=new ue);var n=globalThis.WebQitInternalsRegistry.get(e);n||(n=new ue,globalThis.WebQitInternalsRegistry.set(e,n));for(var r,o;r=t.shift();)(o=n)&&!(n=n.get(r))&&(n=new ue,o.set(r,n));return n}var ue=class extends Map{constructor(...t){super(...t),this.observers=new Set}set(t,n){let r=super.set(t,n);return this.fire("set",t,n,t),r}delete(t){let n=super.delete(t);return this.fire("delete",t),n}has(t){return this.fire("has",t),super.has(t)}get(t){return this.fire("get",t),super.get(t)}keyNames(){return Array.from(super.keys())}observe(t,n,r){let o={type:t,key:n,callback:r};return this.observers.add(o),()=>this.observers.delete(o)}unobserve(t,n,r){if(Array.isArray(t)||Array.isArray(n))throw new Error('The "type" and "key" arguments can only be strings.');for(let o of this.observers)!(we([t,"*"],o.type)&&we([n,"*"],o.key)&&o.callback===r)||this.observers.delete(o)}fire(t,n,...r){for(let o of this.observers)!(we([t,"*"],o.type)&&we([n,"*"],o.key))||o.callback(...r)}},we=(e,t)=>Array.isArray(t)?At(e,t).length:e.includes(t);var $=(e,...t)=>be(e,"oohtml",...t);function Ye(e={}){let t=this,r=bt.call(t).meta("oohtml").copyWithDefaults(e,{attr:{namespace:"namespace",id:"data-id"},api:{namespace:"namespace"},staticsensitivity:!0,eagermode:!0});r.idSelector=`[${t.CSS.escape(r.attr.id)}]`,r.namespaceSelector=`[${t.CSS.escape(r.attr.namespace)}]`,vr.call(this,r),Ar.call(this,r)}function vr(e){let t=this;if(e.api.namespace in t.document)throw new Error(`document already has a "${e.api.namespace}" property!`);if(e.api.namespace in t.Element.prototype)throw new Error(`The "Element" class already has a "${e.api.namespace}" property!`);Object.defineProperty(t.document,e.api.namespace,{get:function(){return C.proxy(ce.call(t,t.document,e))}}),Object.defineProperty(t.Element.prototype,e.api.namespace,{get:function(){return C.proxy(ce.call(t,this,e))}})}function ce(e,t){let n=this;if(!$(e).has("namespace")){let r=Object.create(null);C.intercept(r,"get",(o,i,f)=>{if(C.has(r,o.key)||!t.eagermode)return f();let l=`[${n.CSS.escape(t.attr.id)}="${o.key}"]`,s=Array.from(e.querySelectorAll(l)).filter(c=>{let u=c.parentNode.closest(t.namespaceSelector);return e===n.document?!u:u===e})[0];return s&&C.set(r,o.key,s),f()}),$(e).set("namespace",r)}return $(e).get("namespace")}function Ar(e){let t=this,{dom:n}=t.wq,r=(o,i,f)=>{let l=i.getAttribute(e.attr.id),s=o.closest(e.namespaceSelector)||$(i).get("ownerNamespace")||t.document,c=ce.call(t,s,e);f?C.get(c,l)!==i&&($(i).set("ownerNamespace",s),C.set(c,l,i)):C.get(c,l)===i&&($(i).delete("ownerNamespace"),C.deleteProperty(c,l))};n.realtime(t.document).observe(e.idSelector,o=>{o.entrants.forEach(i=>r(o.target,i,!0)),o.exits.forEach(i=>r(o.target,i,!1))},{subtree:!0,timing:"sync",staticSensitivity:e.staticsensitivity}),e.staticsensitivity&&n.realtime(t.document,"attr").observe(e.namespaceSelector,o=>{let i=o.target.parentNode?.closest(e.namespaceSelector)||$(o.target).get("ownerNamespace")||t.document,f=ce.call(t,i,e),l=ce.call(t,o.target,e);if(o.target.matches(e.namespaceSelector))for(let[s,c]of Object.entries(f))!o.target.contains(c.parentNode)||(C.deleteProperty(f,s),C.set(l,s,c));else for(let[s,c]of Object.entries(l))C.deleteProperty(l,s),C.set(f,s,c)},{subtree:!0,timing:"sync"})}Ye.call(window);})();
//# sourceMappingURL=namespaced-html.js.map
