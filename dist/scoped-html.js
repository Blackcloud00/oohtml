!function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=22)}([function(e,t,a){"use strict";var r=a(13);t.a=function(e){return Array.isArray(e)||"object"==typeof e||Object(r.a)(e)}},function(e,t,a){"use strict";t.a=function(e){return Array.isArray(e)}},function(e,t,a){"use strict";t.a={Window:null,Trap:null,ScopedHTML:null,ScopedJS:null,params:{namespaceAttribute:"namespace",bundleAttribute:"chtml-bundle",importElement:"chtml-import",keyValAttributes:[],listAttributes:[],norecomposeAttributes:["nocompose","shadow"],recomposeCallback:null}}},function(e,t,a){"use strict";var r=a(1),i=a(10),n=a(7),o=a(11),l=a(0),s=a(4);t.a=function(e,t=!0){return Object(r.a)(e)?e:!t&&Object(s.a)(e)?[e]:!1!==e&&0!==e&&function(e){return Object(o.a)(e)||Object(n.a)(e)||!1===e||0===e||Object(l.a)(e)&&!Object.keys(e).length}(e)?[]:function(e){return!Object(i.a)(e)&&!Object(n.a)(e.length)}(e)?Array.prototype.slice.call(e):Object(s.a)(e)?Object.values(e):[e]}},function(e,t,a){"use strict";t.a=function(e){return!Array.isArray(e)&&"object"==typeof e&&e}},function(e,t,a){"use strict";var r=a(13);t.a=function(e){return Object(r.a)(e)||e&&"[object function]"==={}.toString.call(e)}},function(e,t,a){"use strict";t.a={factory:null,Window:null,Trap:null,params:{rootAttribute:"scope",roleAttribute:"scope",hintAttribute:"hint",scopeTreePropertyName:"scope"}}},function(e,t,a){"use strict";t.a=function(e){return arguments.length&&(void 0===e||void 0===e)}},function(e,t,a){"use strict";t.a=function(e){return!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}},function(e,t,a){"use strict";t.a={Window:null,Trap:null,params:{scriptElement:'script[type="text/scoped-js"]',autoHide:!0},globals:{}}},function(e,t,a){"use strict";t.a=function(e){return"string"==typeof e}},function(e,t,a){"use strict";t.a=function(e){return null===e||""===e}},function(e,t,a){"use strict";t.a=function(e,...t){return t.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e}},function(e,t,a){"use strict";t.a=function(e){return"function"==typeof e}},function(e,t,a){"use strict";var r=a(0),i=a(8);t.a=function(e,t){var a=void 0;return Object(r.a)(e)&&Object.keys(e).forEach((r,n)=>{!1!==a&&(a=t(Object(i.a)(r)?parseFloat(r):r,e[r],n))}),a}},function(e,t,a){"use strict";t.a=function(e){return e.filter((e,t,a)=>a.indexOf(e)===t)}},,function(e,t,a){"use strict";var r=a(1);t.a=function(e,t,a=null){return Object(r.a)(t)?e.filter(e=>a?t.filter(t=>a(e,t)).length:-1!==t.indexOf(e)):[]}},function(e,t,a){"use strict";var r=a(0),i=a(3),n=a(1),o=a(10),l=function(e,t=null){var a={};return 2===arguments.length&&(Object(o.a)(e)?a[e]=t:Object(n.a)(e)&&Object(n.a)(t)&&e.forEach((e,r)=>a[e]=t[r])),a},s=a(8),p=a(13),c=a(5),d=a(7),u=a(4),h=a(14),g=class{constructor(e,t={}){this.$={},this.$.target=e,this.$.details=t,this.$.propagationStopped=!1,this.$.defaultPrevented=!1,this.$.promisesInstance=null,this.$.promises=[],Object(h.a)(t,(e,t)=>{"$"!==e&&Object.defineProperty(this,e,{value:t})})}get target(){return this.$.target}get details(){return this.$.details}stopPropagation(){this.$.propagationStopped=!0}get propagationStopped(){return this.$.propagationStopped}preventDefault(){this.$.defaultPrevented=!0}get defaultPrevented(){return this.$.defaultPrevented}promise(e){if(!(e instanceof Promise))throw new Error("Event.promise() must be called with a Promise.");this.$.promises.push(e),this.$.promisesInstance=null}get promises(){return!this.$.promisesInstance&&this.$.promises.length&&(this.$.promisesInstance=Promise.all(this.$.promises)),this.$.promisesInstance}response(e){var t,a=Object(u.a)(e)&&!Object(d.a)(e.propagationStopped)&&!Object(d.a)(e.defaultPrevented);!1===e||a&&e.propagationStopped?this.stopPropagation():!1===e||a&&e.defaultPrevented?this.preventDefault():(e instanceof Promise&&(t=e)||a&&(t=e.promises))&&this.promise(t)}},f=class extends g{constructor(e,t={}){super(e,t)}},b=function(e){return"number"==typeof e},m=function(e){return Object(u.a)(e)&&Object.getPrototypeOf(e)===Object.prototype},y=function(e){return!0===e||!1===e};const w=function(e,t,a=!0,i=1){if(Object(n.a)(e)&&Object(n.a)(t)&&e.length!==t.length)return!a;if(Object(u.a)(e)&&Object(u.a)(t)){var o=Object.keys(e),l=Object.keys(t);if(!o.length&&!l.length)return m(e)&&m(t)?a:e===t===a;if(!w(o,l))return!a}if(i>0&&(Object(n.a)(e)&&Object(n.a)(t)||Object(u.a)(e)&&Object(u.a)(t))){var s=function(e,t,a=!0,i=!0,o=!1,l=!1){if(Object(n.a)(e)&&Object(n.a)(t)){var s=[],p=!0;return e.forEach(e=>{if(p){var c=!1;Object(h.a)(t,(t,o)=>{(!c||i&&Object(r.a)(e))&&(c=a(e,o),(Object(n.a)(c)&&!c.length||Object(u.a)(c)&&!Object.keys(c).length)&&(c=!1),Object(r.a)(c)&&i&&(e=c))}),Object(r.a)(c)?s.push(i?c:e):y(c)?o&&!c||!o&&c?s.push(e):l&&(p=!1):s.push(c)}}),s}if(Object(u.a)(e)&&Object(u.a)(t)){s={},p=!0;return Object.keys(e).forEach(c=>{if(p){var d=a(e[c],t[c]);(Object(n.a)(d)&&!d.length||Object(u.a)(d)&&!Object.keys(d).length)&&(d=!1),Object(r.a)(d)?s[c]=i?d:e[c]:y(d)?o&&!d||!o&&d?s[c]=e[c]:l&&(p=!1):s[c]=d}}),s}}(e,t,(e,t)=>w(e,t,a,i-1),!1,!1,!0);return Object(n.a)(s)?s.length===e.length&&s.length===t.length:Object(u.a)(s)&&Object(u.a)(e)?Object.keys(s).length===Object.keys(e).length&&Object.keys(s).length===Object.keys(t).length:s}return Object(c.a)(a)?a(e,t):b(e)&&b(t)&&isNaN(e)&&isNaN(t)?a:e===t===a};var v=w,j=a(17),O=class{disconnect(){this.disconnected=!0}},E=class{constructor(){this.fireables=[],this.currentlyFiringEvents=[]}addFireable(e){return this.fireables.push(e),e}removeFireable(e,t=[]){this.fireables=this.fireables.filter(t=>t!==e)}findFireables(e){return this.fireables.filter(t=>!(e.handler&&t.handler!==e.handler||e.params&&(e.params.type&&t.params.type!==e.params.type||e.params.tags&&Object(j.a)(t.params.tags||[],e.params.tags).length!==e.params.tags.length)))}static createForTarget(e,t,a){var i;if(e&&Object(r.a)(e))return(i=e[T])||(i={},Object.defineProperty(e,T,{get:()=>i,set:e=>{if(e!==i)throw new Error('Attempt to overwrite the "'+T+'" special property!')},enumerable:!1})),i[t]="listeners"===t?new a(e):new a,i[t]}static getForTarget(e,t){var a;if(e&&Object(r.a)(e)&&(a=e[T]))return a[t]}};const T=".reflex";var F=class extends O{constructor(e,t={}){super(),this.handler=e,this.params=t}fire(e,t,a){return this.disconnected||this.params.type&&this.params.type!==e.type?t(...Object(i.a)(arguments).slice(2)):this.handler(e,a,t)}};class k extends E{fire(e,t=null){if(this.currentlyFiringEvents.filter(t=>t.type===e.type&&t.query===e.query).length)return t?t():void 0;this.currentlyFiringEvents.push(e);const a=(r,...i)=>{var n=this.fireables[r];return n?n.fire(e,(...e)=>a(r+1,...e),...i):t?t(...i):i[0]};var r=a(0);return this.currentlyFiringEvents.pop(),r}static createForTarget(e){return super.createForTarget(e,"traps",k)}static getForTarget(e){return super.getForTarget(e,"traps")}}var D=a(12),x=function(e,t){var a=[];return function(e,t){t=(t=t||Object.prototype)&&!Object(n.a)(t)?[t]:t;var a=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)a.push(e),e=e?Object.getPrototypeOf(e):null;return a}(e,t).forEach(e=>{Object(D.a)(a,...Object.getOwnPropertyNames(e))}),a};function P(e,t,a=!1,i=!1,o=!0){var l=0,p=e.shift();if((Object(s.a)(p)||!0===p||!1===p)&&(l=p,p=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach((e,d)=>{(Object(r.a)(e)||Object(c.a)(e))&&(a?x(e):Object.getOwnPropertyNames(e)).forEach(r=>{var c=p[r],h=e[r];if((Object(n.a)(c)&&Object(n.a)(h)||Object(u.a)(c)&&Object(u.a)(h))&&(!0===l||l>0))p[r]=Object(n.a)(c)&&Object(n.a)(h)?[]:{},P([Object(s.a)(l)?l-1:l,p[r],c,h],t,a,i,o);else if(t(r,p,e,d))if(Object(n.a)(p)&&Object(n.a)(e))i?p[r]=h:p.push(h);else try{o?Object.defineProperty(p,r,Object.getOwnPropertyDescriptor(e,r)):p[r]=e[r]}catch(e){}})}),p}var R=function(e,t=[],a=!0){var i=0;return Object(s.a)(arguments[0])&&Object(r.a)(arguments[1])&&(i=arguments[0],e=arguments[1],t=arguments[2]||[]),P([i,{},e],(e,a,r)=>Object(c.a)(t)?t(e):!Object(n.a)(t)||!t.length||t.indexOf(e)>-1,!1,!1,a)},S=function(...e){return P(e,(e,t,a)=>!0,!1,!1,!1)},A=a(15),N=class extends g{constructor(e,t={}){if(t.data&&(t.fields=Object.keys(t.data)),super(e,t),this.srcEvt){this.dataEven=this.srcEvt.dataEven,this.originatingTarget=this.srcEvt.originatingTarget,this.originatingType=this.srcEvt.originatingType,this.originatingFields=[],this.originatingData={},this._originatingData={};var a=this.fields[0];Object.keys(this.srcEvt.originatingData).forEach(e=>{var t=a+"."+e;this.originatingFields.push(t),this.originatingData[t]=this.srcEvt.originatingData[e],this._originatingData[t]=this.srcEvt._originatingData[e]}),this.originatingCreated=this.srcEvt.originatingCreated,this.originatingDeleted=this.srcEvt.originatingDeleted}else this.dataEven=v(this.data,this._data),this.originatingTarget=this.target,this.originatingType=this.type,this.originatingFields=this.fields,this.originatingData=this.data,this._originatingData=this._data,this.originatingCreated=this.created,this.originatingDeleted=this.deleted}},_=a(11);class C extends E{findFireables(e){return super.findFireables(e).filter(t=>Object(_.a)(e.fields)||Object(d.a)(e.fields)||v(Object(i.a)(t.fields),Object(i.a)(e.fields)))}fire(e){return this.currentlyFiringEvents.filter(t=>t.type===e.type&&t.fields===e.fields).length||(this.currentlyFiringEvents.push(e),this.fireables.forEach(t=>{e.propagationStopped||t.params.type&&t.params.type!==e.type||t.fire(e)}),this.currentlyFiringEvents.pop()),e}static createForTarget(e){return super.createForTarget(e,"observers",C)}static getForTarget(e){return super.getForTarget(e,"observers")}}var W=function(e,t,a=null,i={}){if(!e||!Object(r.a)(e))throw new Error("Object must be of type object!");var n;(Object(c.a)(t)||Object(_.a)(t)||Object(d.a)(t))&&(i=arguments.length>2?a:{},a=t,t=null),(n=C.getForTarget(e))&&n.findFireables({handler:a,fields:t,params:i}).forEach(e=>{n.removeFireable(e)})},M=function(e,t,a){W(a,null,{tags:["#e-bubbling",t,e]})},$=function(e){return typeof e},q=a(19),L=function(e,t,a={},n={}){t=Object(i.a)(t).slice();for(var o=e;!Object(d.a)(o)&&!Object(_.a)(o)&&t.length;){var l=t.shift();if(!(a.get?a.get(o,l):Object(r.a)(o)?l in o:o[l]))return void(n.exists=!1);o=a.get?a.get(o,l):o[l]}return n.exists=!0,o},H=class extends O{constructor(e,t=null,a={}){if(super(),this.handler=e,this.fields=t,this.params=a,this.fieldsArray=Object(i.a)(this.fields),this.isDynamicField=this.fieldsArray.filter(e=>e.indexOf("..")>-1||e.startsWith(".")||e.endsWith(".")).length,this.isDynamicField&&this.fieldsArray.length>1)throw new Error('Only one "Dynamic Field" must be observed at a time! "'+this.fieldsArray.join(", ")+'" have been bound together.')}fire(e){this.disconnected||this.params.type&&this.params.type!==e.type||e.dataEven&&!1!==this.params.diff||this.fireCallback(e,t=>{if(t){var a=[],r=[];return!1!==this.params.data&&t.forEach(t=>{var i=e.originatingFields.reduce((a,r)=>{var i=e.originatingData[r],n=e._originatingData[r];if(!a&&t===r)return[i,n];if(!a&&(t+".").startsWith(r+".")){var o=Object(q.a)(t,r+".");return[L(i,o.split("."),{get:z}),L(n,o.split("."),{get:z})]}return a},null);if(i)a.push(i.shift()),r.push(i.shift());else{var n=L(e.target,Object(o.a)(t)?t.split("."):t,{get:z});a.push(n),r.push(n)}}),Object(n.a)(this.fields)?e.response(this.handler(a,r,e)):e.response(this.handler(a[0],r[0],e))}a={},r={};return e.fields.forEach(t=>{var i=t in e.data?e.data[t]:z(e.target,t),n=t in e._data?e._data[t]:i;a[t]=i,r[t]=n}),e.response(this.handler(a,r,e))})}fireCallback(e,t){if(this.fieldsArray.length){var a=[];this.fieldsArray.filter((t,r)=>(t=Object(o.a)(t)?t.replace(/`/g,""):t,a[r]=[],e.originatingFields.filter(i=>{var n=i.split("."),o=this.isDynamicField?t.split(".").map((e,t)=>e||n[t]||"").join("."):t;return Object(D.a)(a[r],o),(o===i&&!e.srcEvt||!1!==this.params.observeUp&&(o+".").startsWith(i+".")||this.params.observeDown&&(i+".").startsWith(o+"."))&&(!this.isDynamicField||!o.split(".").filter(e=>!e).length)}).length)).length&&(r=a,r.reduce((e,t)=>{var a=[];return e.forEach(e=>{Object(i.a)(t).forEach(t=>{var r=e.slice();r.push(t),a.push(r)})}),a},[[]])).forEach(t)}else this.fields||e.srcEvt&&!this.params.observeDown||t();var r}},I=function(e,t,a=null,i={}){if(!e||!Object(r.a)(e))throw new Error("Object must be of type object!");if(Object(c.a)(t)&&(i=arguments.length>2?a:{},a=t,t=null),!Object(c.a)(a))throw new Error('Callback must be a function; "'+$(a)+'" given!');var n;return(n=C.getForTarget(e))||(n=C.createForTarget(e)),n.addFireable(new H(a,t,i))},B=function(e,t,a){var r;I(a,(i,n,o)=>{if(r=C.getForTarget(e)){var s=l(t,a);return r.fire(new N(e,{type:o.type,bubbling:!0,data:s,_data:s,srcEvt:o}))}},{observeDown:!0,tags:["#e-bubbling",t,e]})},J=function(e,t,a=[],i=!1){var o=e.map((e,t)=>{if(!e||!Object(r.a)(e))throw new Error("Target must be of type object!");return{target:e,targetCopy:R(e,a),setData:{},_setData:{},delData:{},_delData:{},created:[],deleted:[]}}),l=t(...e);return o.map(e=>{var t,o,l=Object.keys(e.targetCopy),s=Object.keys(e.target),p=Object(A.a)(l.concat(s)).filter(t=>{if(!(a.length&&!a.includes(t)||Object(n.a)(e.target)&&("length"===t||".reflex"===t))){if(s.includes(t)?(e._setData[t]=e.targetCopy[t],e.setData[t]=e.target[t],l.includes(t)||e.created.push(t)):(e._delData[t]=e.targetCopy[t],e.delData[t]=void 0,e.deleted.push(t)),e.targetCopy[t]!==e.target[t])return e.targetCopy[t]&&Object(r.a)(e.targetCopy[t])&&M(e.target,t,e.targetCopy[t]),e.target[t]&&Object(r.a)(e.target[t])&&B(e.target,t,e.target[t]),!0;delete e.setData[t],delete e._setData[t]}});return((o=C.getForTarget(e.target))||i)&&(t=new N(e.target,{type:"transaction",data:S(e.setData,e.delData),_data:S(e._setData,e._delData),created:e.created,deleted:e.deleted}),o&&(Object.keys(e.delData).length&&t.response(o.fire(new N(e.target,{type:"del",data:e.delData,_data:e._delData,deleted:e.deleted}))),Object.keys(e.setData).length&&t.response(o.fire(new N(e.target,{type:"set",data:e.setData,_data:e._setData,created:e.created}))))),i?t:p}),l},z=function(e,t){if(!e||!Object(r.a)(e))throw new Error("Target must be of type object!");var a,i,o,d=function(a){return arguments.length?a:Object(n.a)(t)?l(t,e):e[t]};return a=(i=k.getForTarget(e))?i.fire(new f(e,{type:"get",query:t}),d):d(),!Object(n.a)(e)||Object(s.a)(t)||!Object(c.a)(a)||(o=a,Object(p.a)(o)&&/^class\s?/.test(Function.prototype.toString.call(o)))?a:function(...t){return J([e],()=>a.apply(e,t))}},K=function(e,t){return e.reduce((e,a)=>e&&t(a),!0)},V=function(e,t){if(!e||!Object(r.a)(e))throw new Error("Target must be of type object!");var a,i=function(a){return arguments.length?a:t in e};return(a=k.getForTarget(e))?a.fire(new f(e,{type:"has",query:t}),i):i()},Q=function(e,t,a,l=null,s=!1){if(!t||!Object(r.a)(t))throw new Error("Target must be of type object!");Object(u.a)(a)&&(s=l);var p,c,d=a,h={},g={},m=[],y=(a,i,n)=>{var o;h[a]=t[a],V(t,a)||m.push(a),e&&(i=(o=i||{}).value);var l,s,p=function(e){return arguments.length?e:(o?Object.defineProperty(t,a,o):t[a]=i,!0)};if(s=k.getForTarget(t)){var c=o?{type:"def",query:a,descriptor:o,related:n}:{type:"set",query:a,value:i,related:n};l=s.fire(new f(t,c),p)}else l=p();return l?(g[a]=i,g[a]!==h[a]?(h[a]&&Object(r.a)(h[a])&&M(t,a,h[a]),g[a]&&Object(r.a)(g[a])&&B(t,a,g[a])):(delete g[a],delete h[a])):delete h[a],l},w=[];if(Object(n.a)(d)||(Object(o.a)(d)||b(d))&&(d=Object(i.a)(d)))w=d.map(e=>y(e,l,d));else if(Object(u.a)(a)){var v=Object.keys(a);w=v.map(e=>y(e,a[e],v))}return((c=C.getForTarget(t))||s)&&(p=new N(t,{type:"set",data:g,_data:h,created:m}),c&&c.fire(p)),s?p:K(w,e=>e)},U=function(e,t,a=null,r=!1){return Q(!1,...arguments)},Z=function(e,t){Object(i.a)(t).forEach(t=>{var a,r,i=e[t],n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!(t in e)};"value"in n&&delete n.value,"writable"in n&&delete n.writable,n.get=()=>{if(a)return i;a=!0;var r=z(e,t);return a=!1,r},n.set=a=>{if(r)return i=a,!0;r=!0;U(e,t,a);return r=!1,!0},Object.defineProperty(e,t,n)})},G=function(e,t){if(!t||!Object(r.a)(t))throw new Error("Target must be of type object!");var a,i=function(a){return arguments.length?a:e?Object.getOwnPropertyNames(t):Object.keys(t)};return(a=k.getForTarget(t))?a.fire(new f(t,{type:e?"ownKeys":"keys"}),i):i()},X=function(e){return G(!1,...arguments)};var Y=function(e,t,a=null,r=!1){return Q(!0,...arguments)},ee=function(e,t,a=!1){if(!e||!Object(r.a)(e))throw new Error("Target must be of type object!");t=Object(i.a)(t);var n,o,l={},s={},p=[],c=t.map(a=>{l[a]=e[a],V(e,a)&&p.push(a);var i,n,o=function(t){return arguments.length?t:(delete e[a],!0)};return(i=(n=k.getForTarget(e))?n.fire(new f(e,{type:"del",query:a,related:t}),o):o())&&(s[a]=void 0,l[a]&&Object(r.a)(l[a])&&M(e,a,l[a])),i});return((o=C.getForTarget(e))||a)&&(n=new N(e,{type:"del",data:s,_data:l,deleted:p}),o&&Object.keys(s).length&&o.fire(n)),a?n:K(c,e=>e)};class te extends E{fire(e){return this.fireables.forEach(t=>{e.propagationStopped||t.fire(e)}),e}static createForTarget(e,t=te){return super.createForTarget(e,"listeners",t)}static getForTarget(e){return super.getForTarget(e,"listeners")}}var ae=class extends O{constructor(e,t={}){super(),this.handler=e,this.params=t}fire(e){this.params.type===e.type&&e.response(this.handler.call(this.target,e.e))}};const re=ee,ie=Y;t.a={build:function e(t,a=!1){if(!t||!Object(r.a)(t))throw new Error("Target must be of type object!");var i=X(t);i.forEach(i=>{var n=z(t,i);Object(r.a)(n)&&n&&(B(t,i,n),e(n,a))}),a&&Z(t,i)},observe:I,unobserve:W,trap:function(e,t,a={}){if(!e||!Object(r.a)(e))throw new Error("Object must be of type object!");if(!Object(c.a)(t))throw new Error('Callback must be a function; "'+$(t)+'" given!');var i;return(i=k.getForTarget(e))||(i=k.createForTarget(e)),i.addFireable(new F(t,a))},untrap:function(e,t=null,a={}){if(!e||!Object(r.a)(e))throw new Error("Object must be of type object!");var i;(i=C.getForTarget(e))&&i.findFireables({handler:t,params:a}).forEach(e=>{i.removeFireable(e)})},def:Y,defineProperty:ie,set:U,del:ee,deleteProperty:re,link:B,unlink:M,transaction:J,get:z,has:V,init:Z,keys:X,ownKeys:function(e){return G(!0,...arguments)},on:function(e,t,a,r={}){var i;return(i=te.getForTarget(e))||(i=te.createForTarget(e)),i.addFireable(new ae(a,S(r,{type:t})))},off:function(e,t,a=null,r={}){var i;(i=te.getForTarget(e))&&i.findFireables({handler:a,type:t,params:r}).forEach(e=>{i.removeFireable(e)})},trigger:function(e,t,a={}){var r;if(r=te.getForTarget(e))return r.fire(new g(e,S(a,{type:t})))},MutationEvent:N,QueryEvent:f,Event:g}},function(e,t,a){"use strict";t.a=function(e,t,a=!1){if(""==t)return e;var r=a?e.lastIndexOf(t):e.indexOf(t);return-1===r?"":e.substr(r+t.length)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(14),i=a(6),n=a(9),o=a(2);function l(e){Object(r.a)(e,(e,t)=>{i.a[e]=t,n.a[e]=t,o.a[e]=t})}l.ScopedHTML=i.a,l.ScopedJS=n.a,l.Chtml=o.a,l.Chtml.ScopedHTML=i.a,l.Chtml.ScopedJS=n.a},,function(e,t,a){"use strict";a.r(t);var r=a(18),i=a(1),n=a(8),o=a(3),l=a(14),s=a(20);var p=a(4),c=a(12),d=a(17);const u={std:{html:{type:["#sectioning-root"],model:["head","body"],singleton:!0},caption:{model:["#flow","!table"],singleton:!0},col:{model:["#nothing"]},colgroup:{model:[{"colgroup[span]":["#nothing"]},{":not(colgroup[span])":["col","template"]}],singleton:!0},dd:{model:["#flow"],implicitRole:"definition"},dt:{model:["#flow","!#heading","!#sectioning","!header","!footer"],implicitRole:"term"},figcaption:{model:["#flow"],singleton:!0},head:{model:["#metadata"],singleton:!0},legend:{model:["#phrasing"],singleton:!0},li:{model:["#flow"],implicitRole:"listitem"},optgroup:{model:["option","#script-supporting"],implicitRole:"group"},option:{model:[{"option[label][value]":["#nothing"]},{"option[label]:not(option[value])":["#text"]},{":not(option[label])":["#text"]}]},param:{model:["#nothing"]},rp:{model:["#text"]},rt:{model:["#phrasing"]},source:{model:["#nothing"]},summary:{model:["#phrasing","#heading"],singleton:!0},track:{model:["#nothing"]},tbody:{model:["#script-supporting","tr"]},td:{model:["#flow","!#heading","!#sectioning","!header","!footer"]},tfoot:{model:["tr","#script-supporting"],singleton:!0},thead:{model:["tr","#script-supporting"],singleton:!0},tr:{model:["#script-supporting","td","th"]},a:{type:["#flow","#phrasing",{"a[href]":["#interactive","#palpable"]}],model:["#transparent","!#interactive","!a"]},abbr:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},address:{type:["#flow","#palpable"],model:["#flow","!#heading","!#sectioning","!header","!footer","!address"]},area:{type:["#flow","#phrasing"],model:["#nothing"]},article:{type:["#flow","#palpable","#sectioning-content"],model:["#flow"],implicitRole:"article",acceptableRoles:["application","article","document","main"]},aside:{type:["#flow","#palpable","#sectioning-content"],model:["#flow"],implicitRole:"complementary",acceptableRoles:["complementary","note","search"]},audio:{type:["#embedded","#flow","#phrasing",{"audio[controls]":["#interactive","#palpable"]}],model:["#transparent","!#media","track",{":not(audio[src])":["source"]}]},b:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},base:{type:["#metadata"],model:["#nothing"],singleton:!0},bdi:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},bdo:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},blockquote:{type:["#flow","#palpable","#sectioning-root"],model:["#flow"]},body:{type:["#sectioning-root"],model:["#flow","@banner","@contentinfo","@complementary","@main"],singleton:!0},br:{type:["#flow","#phrasing"],model:["#nothing"]},button:{type:["#flow","#interactive","#palpable","#phrasing"],model:["#phrasing","!#interactive"]},canvas:{type:["#embedded","#flow","#palpable","#phrasing"],model:["#transparent","!#interactive","a","img[usemap]","button",'input[type="button"]','input[type="radio"]','input[type="checkbox"]',"select[multiple]","select[size>=1]","[tabindex]!#interactive"]},cite:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},code:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},data:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},datalist:{type:["#flow","#phrasing"],model:["#phrasing","#script-supporting","option"]},del:{type:["#flow","#phrasing"],model:["#transparent"]},details:{type:["#flow","#interactive","#palpable","#sectioning-root"],model:["#flow","summary"]},dfn:{type:["#flow","#palpable","#phrasing"],model:["#phrasing","!dfn"],implicitRole:"term"},dialog:{type:["#flow","#sectioning-root"],model:["#flow"],implicitRole:"dialog"},div:{type:["#flow","#palpable"],model:[{"dl > div":["dt","dd"]},{div:["#flow"]}]},dl:{type:["#flow"],model:["#script-supporting","dl","dt","div"]},em:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},embed:{type:["#embedded","#flow","#phrasing","#interactive","#palpable"],model:["#nothing"]},fieldset:{type:["#flow","#sectioning-root","#palpable"],model:["legend","#flow"]},figure:{type:["#flow","#sectioning-root","#palpable"],model:["#flow","figcaption"],implicitRole:"figure"},footer:{type:["#flow","#palpable"],model:["#flow","!header","!footer"],acceptableRoles:["contentinfo"],singleton:!0},form:{type:["#flow","#palpable"],model:["#flow","!form"]},h1:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h2:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h3:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h4:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h5:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h6:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},header:{type:["#flow","#palpable"],model:["#flow","!header","!footer"],acceptableRoles:["banner"],singleton:!0},hgroup:{type:["#flow","#heading","#palpable"],model:["h1","h2","h3","h4","h5","h6","#script-supporting"]},hr:{type:["#flow"],model:["#nothing"],implicitRole:"separator"},i:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},iframe:{type:["#embedded","#flow","#phrasing","#interactive","#palpable"],model:["#nothing"]},img:{type:["#embedded","#flow","#phrasing",{"img[usemap]":["#interactive","#palpable"]}],model:["#nothing"]},input:{type:["#flow","#phrasing",{'input:not([type!="hidden"])':["#interactive","#palpable"]}],model:["#nothing"]},ins:{type:["#flow","#phrasing","#palpable"],model:["#transparent"]},kbd:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},label:{type:["#flow","#phrasing","#interactive","#palpable"],model:["#phrasing","!label"]},link:{type:["#metadata",{"body link":["#flow","#phrasing"]}],model:["#nothing"]},main:{type:["#flow","#palpable"],model:["#flow"],implicitRole:"main",singleton:!0},map:{type:["#flow","#phrasing","#palpable"],model:["#transparent"]},mark:{type:["#flow","#phrasing","#palpable"],model:["#transparent"]},math:{type:["#embedded","#flow","#phrasing","#palpable"],model:[]},menu:{type:["#flow",{":contains(> li)":["#palpable"]}],model:["#script-supporting","li"],implicitRole:"list"},meta:{type:["#metadata",{"meta[itemprop]":["#flow","#phrasing"]}],model:["#nothing"],names:["application-name","author","description","generator","keywords","referrer","theme-color"]},meter:{type:["#flow","#labelable","#phrasing","#palpable"],model:["#phrasing","!meter"]},nav:{type:["#flow","#sectioning-content","#palpable"],model:["#flow"],implicitRole:"navigation",acceptableRoles:["navigation"]},noscript:{type:["#metadata","#flow","#phrasing"],model:[{"head link":["style","meta","link"]},{":not(head link)":["#transparent","!noscript"]}]},object:{type:["#embedded","#flow","#phrasing",{"object[usemap]":["#interactive","#palpable"]}],model:["#transparent","param"]},ol:{type:["#flow",{":contains(> li)":["#palpable"]}],model:["#script-supporting","li"],implicitRole:"list"},output:{type:["#flow","#labelable","#phrasing","#palpable"],model:["#phrasing","!meter"]},p:{type:["#flow","#palpable"],model:["#phrasing"]},picture:{type:["#embedded","#flow","#phrasing"],model:["source","img","#acript-supporting"]},pre:{type:["#flow","#palpable"],model:["#phrasing"]},progress:{type:["#flow","#labelable","#phrasing","#palpable"],model:["#phrasing","!progress"]},q:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},ruby:{type:["#flow","#phrasing","#palpable"],model:["rp","rt"]},s:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},samp:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},script:{type:["#flow","#metadata","#phrasing","#acript-supporting"],model:[{"script[src]":[]}]},section:{type:["#flow","#sectioning-content","#palpable"],model:["#flow"],implicitRole:"region",acceptableRoles:["alert","alertdialog","application","contentinfo","dialog","document","log","main","marquee","region","search","status"]},select:{type:["#flow","#interactive","#labelable","#phrasing","#palpable"],model:["option","optgroup","#acript-supporting"]},slot:{type:["#flow","#phrasing"],model:["#transparent"]},small:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},span:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},strong:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},style:{type:["#metadata"],model:["#text"]},sub:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},sup:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},svg:{type:["#embedded","#flow","#phrasing","#palpable"],model:[]},table:{type:["#flow","#palpable"],model:["caption","colgroup","thead","tbody","tr","tfoot","#script-supporting"]},td:{type:["#sectioning-root"],model:["#flow"]},template:{type:["#metadata","#flow","#phrasing","#script-supporting"],model:["#nothing"]},textarea:{type:["#flow","#interactive","#labelable","#phrasing","#palpable"],model:["#text"]},time:{type:["#flow","#phrasing","#palpable"],model:[{"time[datetime]":["#phrasing"]},{":not(time[datetime])":["#text"]}]},title:{type:["#metadata"],model:["#text"],singleton:!0},u:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},ul:{type:["#flow",{":contains(> li)":["#palpable"]}],model:["#script-supporting","li"],implicitRole:"list"},var:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},video:{type:["#embedded","#flow","#phrasing",{"video[controls]":["#interactive","#palpable"]}],model:["#transparent","!#media","track",{":not(video[src])":["source"]}]},wbr:{type:["#flow","#phrasing"],model:["#nothing"]}},aria:{banner:{type:["@banner"],singleton:!0},contentinfo:{type:["@contentinfo"],singleton:!0},complementary:{type:["@complementary"],singleton:!0},navigation:{type:["@navigation"],singleton:!0},list:{type:["@list"]},listitem:{type:["@listitem"]}},getContentModelFor(e){var t=e.nodeName.toLowerCase();return u.std[t]?u.expandRules(e,u.std[t].model||[]):[]},getCategoriesFor(e,t=!0){var a=e.nodeName.toLowerCase(),r=u.std[a]||u.aria[a]||{},i=[];if(t&&!e.nodeName.startsWith("#")&&(e.hasAttribute("role")||r.implicitRole))if(e.hasAttribute("role")){e.getAttribute("role").split(" ");e.getAttribute("role").split(" ").forEach(t=>{r&&r.acceptableRoles&&!r.acceptableRoles.includes(t)||(t=t.trim(),i.push("@"+t),u.aria[t]&&u.aria[t].type&&(i=i.concat(u.expandRules(e,u.aria[t].type||[]))))})}else r.implicitRole&&Object(c.a)(i,"@"+r.implicitRole,a);else i=Object(c.a)(u.expandRules(e,r.type||[]),a);return i},assertNodeBelongsInContentModel(e,t){var a,r=e instanceof HTMLElement?u.getContentModelFor(e):e,i=t instanceof HTMLElement?u.getCategoriesFor(t):t;return!Object(d.a)(r,["#nothing","#text"]).length&&(r.forEach(e=>{if(e.startsWith("!")){var t=e.substr(1);i.includes(t)&&(a=!1)}else!1!==a&&i.includes(e)&&(a=!0)}),a&&!0)},assertNodeBelongsInScopeAs(e,t,a=null){for(var r,i=u.getCategoriesFor(e),n=t;!r&&(n=n.parentNode);)Object(d.a)(i,u.getCategoriesFor(n)).length&&u.assertNodeBelongsInContentModel(n,a&&a.type||t)&&(r=n);return r===e},expandRules(e,t){var a=t.reduce((t,a)=>(Object(p.a)(a)?e.matches(Object.keys(a)[0])&&(t=t.concat(Object.values(a)[0])):t.push(a),t),[]);return a.includes("#sectioning-root")&&a.push("#sectioning-content"),a}};var h=u,g=a(6),f=class{constructor(e){Object.defineProperty(this,"_el",{value:e}),Object.defineProperty(this,"el",{value:"#document"===e.nodeName?e.querySelector("html"):e});const t=(e.getAttribute(g.a.params.rootAttribute)||"").split(" ").map(e=>e.trim()).filter(e=>e);Object.defineProperty(this,"definition",{value:t});const a={};if(Object.defineProperty(this,"store",{value:a}),g.a.Trap&&(g.a.Trap.trap&&g.a.Trap.trap(a,(e,t,a)=>a(t||this.find(e.query)),{type:"get"}),g.a.Trap.init)){const t=(e.getAttribute(g.a.params.hintAttribute)||"").split(" ").map(e=>e.trim()).filter(e=>e);g.a.Trap.init(this.store,t)}}add(e,t){var a=(e,t,a,r=!1)=>{var n=a;return r&&(n=g.a.factory?g.a.factory(a,this):a),g.a.Trap&&g.a.Trap.set?g.a.Trap.set(e,t,n):Object(i.a)(e)?e.push(n):e[t]=n,r&&function e(t,a){if(t.parentNode&&s.a.Window.MutationObserver){var r=!1;new s.a.Window.MutationObserver(e=>{e.forEach(e=>{!r&&Object(o.a)(e.removedNodes).includes(t)&&(r=!0,a())})}).observe(t.parentNode,{childList:!0}),e(t.parentNode,()=>{r||(r=!0,a())})}}(a,()=>{g.a.Trap&&g.a.Trap.deleteProperty?g.a.Trap.deleteProperty(e,t):Object(i.a)(e)?_remove(e,n):delete e[t]}),a};if(Object(i.a)(t)){var r=[];return t.forEach((e,t)=>a(r,t,e,!0)),a(this.store,e,r),r}return a(this.store,e,t)}find(e){return Object(o.a)(e).forEach(e=>{if(e in this.store)return this.store[e];var t;((t=this.findExplicit(e))||(t=this.findImplicit(e)))&&this.add(e,t)}),Object(i.a)(e)?_objFrom(e,this.store):this.store[e]}findExplicit(e){if(this.definition&&this.definition.length){var t=this.case?[this.case]:this.definition,a=g.a.Window.CSS?g.a.Window.CSS.escape:e=>e;return t.reduce((t,r)=>{if(!t){var i,n,o="["+a(g.a.params.rootAttribute)+'~="'+r+'"]',l="["+a(g.a.params.roleAttribute)+'~="'+r+"-"+e+'"]';(n=(this.el.shadowRoot||this.el).querySelector(l))&&(this.el.shadowRoot&&(!n.parentNode.closest||!n.parentNode.closest(o))||!this.el.shadowRoot&&n.parentNode&&(i=n.parentNode.closest(o))&&i.isSameNode(this.el))&&(t=n)}return t},null)}}findImplicit(e){if(!Object(n.a)(e)&&!e.match(/[^a-zA-Z0-9\-]/)){var t=[];h.aria[e]?t.push({Schema:h.aria[e],selector:['[role="'+e+'"]']}):t.push({Schema:h.std[e]||h.aria[e],selector:[e,'[role="'+e+'"]']}),Object(l.a)(h.std,(a,r)=>{r.implicitRole===e&&t.push({Schema:r,selector:[a]})});var a=null;return t.forEach(e=>{(this.el.shadowRoot||this.el).querySelectorAll(e.selector.join(",")).forEach(t=>{h.assertNodeBelongsInScopeAs(this.el,t,e.schema)&&(e.schema&&e.schema.singleton?a=t:a&&!Object(i.a)(a)||(a=a||[]).push(t))}),a||!e.schema||e.schema.singleton||(a=[])}),a}}};f.init=function(e,t=r.a){if(g.a.Window=e,g.a.Trap=t,!g.a.Window||!("Element"in g.a.Window))throw new Error('The "Element" class not found in global context!');if(g.a.params.scopeTreePropertyName in g.a.Window.Element.prototype)throw new Error('The "Element" class already has a "scope" property!');Object.defineProperty(g.a.Window.Element.prototype,g.a.params.scopeTreePropertyName,{get:function(){return this[".scopedHTML"]||(this[".scopedHTML"]=new f(this),g.a.Trap&&g.a.Trap.link&&g.a.Trap.link(this,g.a.params.scopeTreePropertyName,this[".scopedHTML"].store)),this[".scopedHTML"].store}})},f.init(window),window.WebNative||(window.WebNative={}),window.WebNative.ScopedHTML=f,window.WebNative.ScopedHTML.ENV=g.a}]);
//# sourceMappingURL=scoped-html.js.map