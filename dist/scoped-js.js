(()=>{function oe(i={}){let t={runtimeParams:{...Pe,...i.runtimeParams||{}},compilerParams:{...Te,...i.compilerParams||{}},parserParams:{...Ie,...i.parserParams||{}}};return i.devMode,t}var Ie={ecmaVersion:"2020",allowReturnOutsideFunction:!0,allowAwaitOutsideFunction:!0,allowSuperOutsideMethod:!0,preserveParens:!1,locations:!1},Te={globalsNoObserve:["globalThis","arguments","console"],originalSource:!0,globalsOnlyPaths:!1,locations:!0,compact:2},Pe={apiVersion:1};function se(i,t=!1){let r=i.split(/\n/g);if(r.length>1){for(;!r[0].trim().length;)r.shift();let e=r[t?1:0].split(/[^\s]/)[0].length;if(e)return r.map((n,s)=>{let o=n.substring(0,e);return o.trim().length?o.trim()==="}"&&s===r.length-1?"}":n:n.substring(e)}).join(`
`)}return i}var O=(i,t)=>i instanceof Promise?i.then(t):t(i);var fe=new Map;function j(i,t,r=void 0){let e=fe.get(i);if(arguments.length>2){e||(e=new Map,fe.set(i,e)),e.set(t,r);return}return e&&e.get(t)}var T=class{constructor(t,r,e,n={},s=null,o=null){this.ownerContract=t,this.graph=r,this.callee=e,this.params=t?n:{...n,isSubscriptFunction:!0},this.exits=o||new Map,this.$thread=s||{entries:new Map,sequence:[],ownerContract:this},this.subContracts=new Map,this.observers=[],this.contract=function(f,c,u=null,l=null){if(!this.graph.subContracts[f])throw new Error(`[${this.graph.type}:${this.graph.lineage}]: Graph not found for child contract ${f}.`);let a=this.graph.subContracts[f],p={...this.params,isIterationContract:arguments.length===3,iterationId:arguments.length===3&&c,isFunctionContract:arguments.length===4,functionType:arguments.length===4&&c,isSubscriptFunction:arguments.length===4&&u,functionScope:this.params.isFunctionContract&&this.graph.lineage||this.params.functionScope};if(p.isIterationContract){let d=u,y=new T(this,a,d,p,this.$thread,this.exits),_=this.subContracts.get(f);return _||(_=new Map,this.subContracts.set(f,_)),_.has(p.iterationId)&&_.get(p.iterationId).dispose(),_.set(p.iterationId,y),y.call()}let g,m,h;if(this.subContracts.has(f)&&this.subContracts.get(f).dispose(),p.isFunctionContract){g=l;let d=()=>new T(this,a,g,p);if(p.functionType!=="FunctionDeclaration")h=this.createFunction(d);else{let y=d();p.apiVersion>1?(h=function(..._){let v=y.call(this,..._);return v=O(v,E=>[v,y.thread.bind(y),y]),y=d(),v},h.target=y):h=y}}else g=c,m=new T(this,a,g,p,this.$thread,this.exits),this.subContracts.set(f,m),h=m.call();return h}.bind(this),this.contract.memo=Object.create(null),this.ownerContract&&!["FunctionDeclaration","FunctionExpression"].includes(this.graph.type)&&(this.contract.args=this.ownerContract.contract.args),this.contract.exiting=function(f,c){if(!arguments.length)return this.exits.size;let u=this.exits.get(f)===c;return u&&this.exits.clear(),u}.bind(this),this.contract.exit=function(f,c){this.exits.set(f,c)}.bind(this),this.contract.functions=new Map,this.contract.functions.declaration=(f,c)=>{this.contract.functions.set(f,c),this.applyReflection(f,typeof c=="function"?c.target:c)}}fire(t,r,e){if(!this.ownerContract)return;let n=this.ownerContract.fire(t,r,e);return this.observers.forEach(s=>{s.contractUrl===t&&s.callback(r,e)}),n}observe(t,r){!this.params.isFunctionContract||this.observers.push({contractUrl:t,callback:r})}call(t,...r){if(this.disposed)throw new Error(`[${this.graph.type}:${this.graph.lineage}]: Instance not runable after having been disposed.`);this.ownerContract||(this.contract.args=r,Object.defineProperty(this.contract.args,Symbol.toStringTag,{value:"Arguments"}));let e=this.callee.call(t,this.contract,...r);if(this.graph.$sideEffects)for(let n in this.graph.effects)for(let s of this.graph.effects[n].refs)this.buildThread([],s,[],0,!0);return O(e,()=>{if(!this.ownerContract||this.params.isFunctionContract){let n=this.exits.get("return");if(this.exits.clear(),n!==void 0)return n}return e})}iterate(t=[]){if(this.disposed)return!1;if(!["ForOfStatement","ForInStatement"].includes(this.graph.type)||this.subContracts.size!==1)throw new Error(`Contract ${this.graph.lineage} is not an iterator.`);let[[,r]]=this.subContracts,e;if(!t.length||t.includes("length")&&this.graph.type==="ForOfStatement")for(let[,n]of r)e=O(e,()=>n.call());else for(let n of t){let s=r.get(n)||r.get(parseInt(n));!s||(e=O(e,()=>s.call()))}return e}thread(...t){if(this.disposed)return!1;this.$thread.active=!0;for(let r in this.graph.effects)for(let e of this.graph.effects[r].refs)for(let n of t){let[s,o,f]=this.matchRefs(n,e);!s||this.buildThread(n,e,f,o)}return this.runThread()}runThread(){let t=(s,o)=>{if(["ForOfStatement","ForInStatement"].includes(s.graph.type)&&o.every(f=>f.executionPlan.isIterationContractTarget)){let f=o.map(c=>c.executionPlan.iterationTarget);return this.fire(s.graph.lineage,"iterating",o),s.iterate(f)}return this.fire(s.graph.lineage,"executing",o),s.call()},r,e,n;for(;(e=this.$thread.sequence.shift())&&(n=[...this.$thread.entries.get(e)])&&this.$thread.entries.delete(e);)r=O(r,()=>{if(e.disposed||!e.filterRefs(n).length)return;this.$thread.current=e;let s=t(e,n);return O(s,()=>{for(let o of n)[].concat(o.executionPlan.assigneeRef||o.executionPlan.assigneeRefs||[]).forEach(f=>{e.buildThread([],f,[],0)})}),s});return O(r,()=>{let s=this.exits.get("return");return this.exits.clear(),this.$thread.current=null,this.$thread.active=!1,s})}buildThread(t,r,e,n=0,s=!1){let o=n>0;if(this.ownerContract){if(!this.compute(e)||r.condition!==void 0&&!this.assert(r.condition))return}else o||(o=e.length||r.condition!==void 0);let f=s?r.$subscriptions:r.subscriptions;Object.keys(f).forEach(c=>{let[u,l]=c.split(":"),a=g=>{!g||g.selectRefs(l,f[c],o?t:null)},p=this.locate(u);Array.isArray(p)?p.forEach(a):a(p)})}selectRefs(t,r,e=null){let n=this.$thread,s=this.graph.signals[t],o=(c,u)=>c.graph.lineage.localeCompare(u.graph.lineage,void 0,{numeric:!0}),f=(c,u=[],l={})=>{if(!n.active||n.current&&o(this,n.current)<0)return;let a=n.entries.get(this);if(a||(a=new Set,n.entries.set(this,a),n.sequence.push(this),n.sequence.sort(o)),a.add({...c,computes:u,executionPlan:l}),!l.assigneeRef&&["VariableDeclaration","AssignmentExpression"].includes(this.graph.type)){l.assigneeRefs=[];for(let p in this.graph.effects)l.assigneeRefs.push(...this.graph.effects[p].refs)}};for(let c of r){let u=s.refs[c];if(!e){f(u);continue}let[l,a,p]=this.matchRefs(e,u);if(!l)continue;if(a<=0){f(u,p);continue}let g=e.slice(-a),m="assignee"in s?this.graph.effects[s.assignee]:null;if(m){m.refs.forEach(h=>{if(h.depth.length){let[d,y,_]=this.matchRefs(g,h.depth),v=p.concat(_);if(d&&y>0){let E=h.path.concat(g.slice(-y));this.buildThread(E,h,v,y)}else d&&f(u,v,{assigneeRef:h})}else{let d=h.path.concat(g);this.buildThread(d,h,p,a)}});continue}if(a===1&&this.graph.type==="ForOfStatement"){f(u,p,{isIterationContractTarget:!0,iterationTarget:g[0]});continue}if(a===1&&this.graph.type==="ForInStatement"){f(u,p,{isIterationContractTarget:!0,iterationTarget:g[0]});continue}}}filterRefs(t){return t.filter(r=>{if(!!this.compute(r.computes)&&!(r.condition!==void 0&&!this.assert(r.condition)))return!0})}matchRefs(t,r){let e,n,s,o;Array.isArray(t)?(e=t,n=t.dotSafe?t.join("."):void 0):(e=t.path,n=t.$path),Array.isArray(r)?(s=r,o=r.dotSafe?r.join("."):void 0):(s=r.path,o=r.$path);let f=e.length-s.length;if(f>0&&([e,s,n,o]=[s,e,o,n]),n&&o)return[`${o}.`.startsWith(`${n}.`),f,[]];let c=[],u=a=>typeof a=="object"?a.name:a,l=(a,p)=>{if(!a||!p)return!1;let g=typeof a=="object"&&"memoId"in a,m=typeof p=="object"&&"memoId"in p;return g||m?(c.push(h=>(g?h[a.memoId]:u(a))===(m?h[p.memoId]:u(p))),!0):u(a)===u(p)};return[e.reduce((a,p,g)=>a&&l(p,s[g]),!0),f,c]}locate(t){let r=this.graph.lineage+"/",e=t+"/";if(e===r)return this;if(e.startsWith(r)){let n=t.slice(r.length).split("/"),s=this.subContracts.get(parseInt(n.shift()));if(n.length){if(s instanceof Map)return Array.from(s).reduce((o,[f,c])=>o.concat(c.locate(t)),[]);if(s)return s.locate(t)}return s}if(this.ownerContract)return this.ownerContract.locate(t)}compute(t){return!t.some(r=>r(this.contract.memo)===!1)}assert(t){if(typeof t=="string"&&t.includes(":")){let[n,s]=t.split(":");return this.locate(n).assert(s)}let r=this.graph.conditions[t],e=this.contract.memo;return typeof r.parent<"u"&&!this.assert(r.parent)?!1:typeof r.switch<"u"?r.cases.some(n=>e[n]===e[r.switch]):typeof r.whenNot<"u"?!e[r.whenNot]:typeof r.when<"u"?e[r.when]:!0}dispose(){this.params.isFunctionContract||(this.subContracts.forEach((t,r)=>{t instanceof Map?(t.forEach(e=>e.dispose()),t.clear()):t.dispose()}),this.subContracts.clear(),delete this.ownerContract,delete this.callee,delete this.params,delete this.contract.memo,this.disposed=!0)}createFunction(t,r=void 0){let e=t(),n=function(o,...f){let c=o.call(this===void 0?r:this,...f);return o.params.isSubscriptFunction&&o.params.apiVersion>1&&(c=O(c,u=>[u,o.thread.bind(o),o]),e=t(e)),c},s=e instanceof Promise||e.callee instanceof async function(){}.constructor?async function(){return O(e,o=>n.call(this,o,...arguments))}:function(){return n.call(this,e,...arguments)};return O(e,o=>{this.applyReflection(s,o)}),j(s,"properties",O(e,o=>{let f={type:o.params.functionType||"Program",apiVersion:o.params.apiVersion||1,isSubscriptFunction:o.params.isSubscriptFunction,sideEffects:o.graph.sideEffects||!1};if(o.params.isSubscriptFunction){f.dependencies=[];for(let[c,u]of Object.entries(o.graph.effects))f.dependencies.push(...u.refs.map(l=>l.path.map(a=>"name"in a?a.name:1/0)))}return f})),s}applyReflection(t,r){Object.defineProperty(r.callee,"length",{configurable:!0,value:r.callee.length-1});let e=r.callee.toString();Object.defineProperty(r.callee,"toString",{configurable:!0,value:(s=!1)=>!s&&r.graph.originalSource?r.graph.originalSource:e});let n={name:r.callee.name,length:r.callee.length,toString:r.callee.toString};r.params.isSubscriptFunction&&(r.params.apiVersion>1||(n={...n,thread:r.thread.bind(r),dispose:r.dispose.bind(r),runtime:r})),Object.keys(n).forEach(s=>{Object.defineProperty(t,s,{configurable:!0,value:n[s]})})}};var L=class extends T{static create(t,r=[],e={}){let s=e.async||t.graph.hoistedAwaitKeyword?Object.getPrototypeOf(async function(){}).constructor:Function,o=e.compileFunction?e.compileFunction(t.source,[t.identifier+""].concat(r)):new s(t.identifier+"",...r,t.source);return new this(null,t.graph,o,e)}static createFunction(t,r,e=[],n={},s,o=null){n={...n,functionType:"Constructor"},r instanceof Promise&&(n={...n,async:!0});let f=l=>l?new this(null,l.graph,l.callee,n):O(r,a=>c(this.create(a,e,n))),c=l=>{if(l.graph.originalSource&&!l.graph.originalSourceModified){let a=`${n.async||l.graph.hoistedAwaitKeyword?"async ":""}function ${t||"anonymous"}`,p=l.graph.originalSource.split(/\n/g).map(g=>`    ${g}`).join(`
`);l.graph.originalSource=`${a}(${e.join(", ")}) {
${p}
}`,l.graph.originalSourceModified=!0}return t&&Object.defineProperty(l.callee,"name",{configurable:!0,value:t}),l},u=this.prototype.createFunction(f,s);return j(u,"locations",O(r,l=>({locations:l.locations}))),u}};function U(...i){if(typeof window!="object")throw new Error("No window in context.");let t=oe(typeof i[i.length-1]=="object"?i.pop():{}),r=se(i.pop()||""),e=i,n=s=>L.createFunction(void 0,s,e,t.runtimeParams,this,r);if(window.wq?.SubscriptCompiler&&!t.runtimeParams.async){let{parse:s,compile:o}=window.wq.SubscriptCompiler,f=s(r,t.parserParams);return n(o(f,t.compilerParams))}if(!window.wq?.SubscriptCompilerWorker){let f=`
        importScripts( '${document.querySelector('meta[name="subscript-compiler-url"]')?.content||"https://unpkg.com/@webqit/subscript/dist/compiler.js"}' );
        const { parse, compile } = self.wq.SubscriptCompiler;
        self.onmessage = e => {
            const { source, params } = e.data;
            const ast = parse( source, params.parserParams );
            const compilation = compile( ast, params.compilerParams );
            compilation.identifier = compilation.identifier.toString();
            e.ports[ 0 ]?.postMessage( compilation );
        };`;window.wq=window.wq||{},window.wq.SubscriptCompilerWorker=new Worker(`data:text/javascript;base64,${btoa(f)}`)}return n(new Promise(s=>{let o=new MessageChannel;wq.SubscriptCompilerWorker.postMessage({source:r,params:t},[o.port2]),o.port1.onmessage=f=>s(f.data)}))}Object.defineProperty(U,"inspect",{value:j});function x(i){return!Array.isArray(i)&&typeof i=="object"&&i}function z(i,...t){globalThis.WebQitInternalsRegistry||(globalThis.WebQitInternalsRegistry=new Map);var r=globalThis.WebQitInternalsRegistry.get(i);if(!r){if(r=new Map,t[0]===!1)return r;globalThis.WebQitInternalsRegistry.set(i,r)}for(var e,n;e=t.shift();)if((n=r)&&!(r=r.get(e))){if(r=new Map,t[0]===!1)return r;n.set(e,r)}return r}function w(i){return Array.isArray(i)}function H(i){return typeof i=="function"}function V(i){return i===null||i===""}function P(i){return arguments.length&&(i===void 0||typeof i>"u")}function S(i){return Array.isArray(i)||typeof i=="object"&&i||H(i)}function X(i){return V(i)||P(i)||i===!1||i===0||S(i)&&!Object.keys(i).length}function b(i){return H(i)||i&&{}.toString.call(i)==="[object function]"}function W(i){return i instanceof Number||typeof i=="number"}function A(i){return W(i)||i!==!0&&i!==!1&&i!==null&&i!==""&&!isNaN(i*1)}function Q(i){return i instanceof String||typeof i=="string"&&i!==null}function Y(i){return!Q(i)&&!P(i.length)}function k(i,...t){return t.forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i}function Z(e,t){t=t||Object.prototype,t=t&&!w(t)?[t]:t;for(var r=[],e=e;e&&(!t||t.indexOf(e)<0)&&e.name!=="default";)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}function K(i,t){var r=[];return Z(i,t).forEach(e=>{k(r,...Object.getOwnPropertyNames(e))}),r}function I(i,t,r=!1,e=!1,n=!1){var s=0,o=i.shift();if((A(o)||o===!0||o===!1)&&(s=o,o=i.shift()),!i.length)throw new Error("_merge() requires two or more array/objects.");return i.forEach((f,c)=>{!S(f)&&!b(f)||(r?K(f):Object.keys(f)).forEach(u=>{if(!!t(u,o,f,c)){var l=o[u],a=f[u];if((w(l)&&w(a)||x(l)&&x(a))&&(s===!0||s>0))o[u]=w(l)&&w(a)?[]:{},I([A(s)?s-1:s,o[u],l,a],t,r,e,n);else if(w(o)&&w(f))e?o[u]=a:o.push(a);else try{n?Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(f,u)):o[u]=f[u]}catch{}}})}),o}function D(...i){return I(i,(t,r,e)=>!0,!1,!1,!1)}function C(i,t=!0){return w(i)?i:!t&&x(i)?[i]:i!==!1&&i!==0&&X(i)?[]:Y(i)?Array.prototype.slice.call(i):x(i)?Object.values(i):[i]}function q(i,t,r={},e={}){t=C(t).slice();for(var n=i;!P(n)&&!V(n)&&t.length;){var s=t.shift();if(!(r.get?r.get(n,s):S(n)?s in n:n[s])){e.exists=!1;return}n=r.get?r.get(n,s):n[s]}return e.exists=!0,n}function te(i,t,r,e={},n={}){let s=(l,a,p)=>n.set?n.set(l,a,p):(A(t[f])&&w(l)?l.push(p):l[a]=p,!0);t=C(t);for(var o=i,f=0;f<t.length;f++)if(f<t.length-1){if(!o||!S(o)&&!b(o))return!1;var c=q(o,t[f],n);if(!S(c)){if(n.buildTree===!1)return!1;c=b(n.buildTree)?n.buildTree(f):A(t[f+1])?[]:{};var u=s(o,t[f],c);if(!u)return!1}o=c}else return s(o,t[f],r)}var pe=i=>class{constructor(r=!0){Object.defineProperty(this,"window",{value:i}),Object.defineProperty(this,"readCallbacks",{value:new Set}),Object.defineProperty(this,"writeCallbacks",{value:new Set}),this.async=r,this.window.requestAnimationFrame?this._run():this.async=!1}_run(){this.window.requestAnimationFrame(()=>{this.readCallbacks.forEach(r=>{r()||this.readCallbacks.delete(r)}),this.writeCallbacks.forEach(r=>{r()||this.writeCallbacks.delete(r)}),this._run()})}onread(r,e=!1){if(e)return new Promise((n,s)=>{this.async===!1?r(n,s):this.readCallbacks.add(()=>{r(n,s)})});this.async===!1?r():this.readCallbacks.add(r)}onwrite(r,e=!1){if(e)return new Promise((n,s)=>{this.async===!1?r(n,s):this.writeCallbacks.add(()=>{r(n,s)})});this.async===!1?r():this.writeCallbacks.add(r)}cycle(r,e,n){this.onread(()=>{let s=r(n),o=f=>{f!==void 0&&this.onwrite(()=>{let c=e(f,n),u=l=>{l!==void 0&&this.cycle(r,e,l)};c instanceof Promise?c.then(u):u(c)})};s instanceof Promise?s.then(o):o(s)})}};var $=class{constructor(t,r,e){this.context=t,this.namespace=r,this.window=t.defaultView||t.ownerDocument?.defaultView||e,this.document=this.window.document,this.wq=this.window.wq,Object.defineProperty(this,"#",{value:{}})}resolveArgs(t){return b(t[0])?t=[[],...t]:x(t[0])&&t.length===1?t=[[],void 0,t[0]]:x(t[1])&&t.length===2?t=[C(t[0],!1),void 0,t[1]]:t[0]=C(t[0],!1),t}registry(...t){return z(this.window,"dom.realtime",this.namespace,...t)}createSignalGenerator(){return{generate(){return this.lastController?.abort(),this.lastController=new AbortController,{signal:this.lastController.signal}},disconnect(){this.lastController?.abort()}}}forEachMatchingContext(t,r,e){let{window:n}=this,s=Array.isArray(r)?r:[r],o=new Set;for(let[f,c]of this.registry(t))for(let[u,l]of c){let a=s.filter(p=>u.contains(p.target)?f==="subtree"||p.target===u:!1);if(!!a.length){Array.isArray(r)||(a=a[0]);for(let p of l)o.add([p,a,u])}}for(let[f,c,u]of o)e.call(this,f,c,u)}disconnectables(t,...r){let e={disconnect(){r.forEach(n=>n&&b(n.disconnect)&&n.disconnect()||b(n)&&n()||x(n)&&(n.disconnected=!0))}};return t&&t.addEventListener("abort",()=>e.disconnect()),e}};var M=class extends ${constructor(t,...r){super(t,"attr",...r)}get(t,r=void 0,e={}){let n=typeof t=="string";[t=[],r=void 0,e={}]=this.resolveArgs(arguments);let{context:s}=this,o=we(s,t),f=n?o[0]:o;if(!r)return f;let c=r&&e.lifecycleSignals&&this.createSignalGenerator(),u=c?.generate()||{};if(r(f,u,s),e.live){c&&(e={...e,signalGenerator:c});let l=this.observe(n?t[0]:t,r,{newValue:!0,...e});return this.disconnectables(e.signal,l)}}observe(t,r,e={}){let n=typeof t=="string";if([t=[],r,e={}]=this.resolveArgs(arguments),["sync","intercept"].includes(e.timing))return this.observeSync(n?t[0]:t,r,e);if(e.timing&&e.timing!=="async")throw new Error(`Timing option "${e.timing}" invalid.`);let{context:s,window:o,wq:f}=this;e.eventDetails&&!f.attrInterceptionHooks?.intercepting&&ge.call(o,"intercept",()=>{});let c=new o.MutationObserver(p=>{p=ye(p).map(g=>_e.call(o,g)),he.call(o,a,p,s)}),u={attributes:!0,attributeOldValue:e.oldValue,subtree:e.subtree};t.length&&(u.attributeFilter=t),c.observe(s,u);let l=e.signalGenerator||e.lifecycleSignals&&this.createSignalGenerator(),a={context:s,filter:t,callback:r,params:e,atomics:new Map,originalFilterIsString:n,signalGenerator:l,disconnectable:c};return this.disconnectables(e.signal,c,l)}observeSync(t,r,e={}){let n=typeof t=="string";[t,r,e={}]=this.resolveArgs(arguments);let{context:s,window:o}=this;if(e.timing&&!["sync","intercept"].includes(e.timing))throw new Error(`Timing option "${e.timing}" invalid.`);let f=e.timing==="intercept"?"intercept":"sync",c=e.subtree?"subtree":"children";this.registry(f).size||ge.call(o,f,m=>{this.forEachMatchingContext(f,m,he)});let u={disconnect(){g.delete(a),g.size||p.delete(s)}},l=e.signalGenerator||e.lifecycleSignals&&this.createSignalGenerator(),a={context:s,filter:t,callback:r,params:e,atomics:new Map,originalFilterIsString:n,signalGenerator:l,disconnectable:u},p=this.registry(f,c);p.has(s)||p.set(s,new Set);let g=p.get(s);return g.add(a),this.disconnectables(e.signal,u,l)}};function ye(i){return i.reduce((t,r,e)=>t[e-1]?.attributeName===r.attributeName?t:t.concat(r),[])}function he(i,t){let{context:r,filter:e,callback:n,params:s,atomics:o,originalFilterIsString:f,signalGenerator:c}=i;s.atomic&&!o.size&&(t=we(r,e,t)),s.newValue===null&&s.oldValue===null||(t=t.map(a=>{let p;return!s.oldValue&&"oldValue"in a&&({oldValue:p,...a}=a),!s.newValue&&"value"in a?{value:p,...a}=a:s.newValue&&typeof a.value>"u"&&(a={...a,value:a.target.getAttribute(a.name)}),a})),s.atomic&&(t.forEach(a=>o.set(a.name,a)),t=Array.from(o.entries()).map(([,a])=>a));let u=f?t[0]:t,l=c?.generate()||{};n(u,l,r)}function we(i,t,r=[]){let e={event:null,type:"attribute"};return t.length?t.map(s=>r.find(o=>o.name===s)||{target:i,name:s,value:i.getAttribute(s),...e}):Array.from(i.attributes).map(s=>r.find(o=>o.name===s.nodeName)||{target:i,name:s.nodeName,value:s.nodeValue,...e})}function _e({target:i,attributeName:t,value:r,oldValue:e}){let o=(this.wq.attrInterceptionRecords?.get(i)||{})[t]||"mutation";return{target:i,name:t,value:r,oldValue:e,type:"observation",event:o}}function ge(i,t){let r=this,{wq:e,document:n,Element:s}=r;e.attrInterceptionHooks||(e.attrInterceptionHooks=new Map),e.attrInterceptionHooks.has(i)||e.attrInterceptionHooks.set(i,new Set),e.attrInterceptionHooks.get(i).add(t);let o=()=>e.attrInterceptionHooks.get(i).delete(t);if(e.attrInterceptionHooks?.intercepting)return o;console.warn("Attr mutation APIs are now being intercepted."),e.attrInterceptionHooks.intercepting=!0,e.attrInterceptionRecords=new Map;let f=(l,a)=>{e.attrInterceptionRecords.has(l.target)||e.attrInterceptionRecords.set(l.target,{});let p=e.attrInterceptionRecords.get(l.target);clearTimeout(p[l.name]?.timeout),p[l.name]=l.event;let g=setTimeout(()=>{delete p[l.name]},0);Object.defineProperty(l.event,"timeout",{value:g,configurable:!0}),e.attrInterceptionHooks.get("intercept")?.forEach(h=>h([l]));let m=a();return e.attrInterceptionHooks.get("sync")?.forEach(h=>h([l])),m};new r.MutationObserver(l=>{l=ye(l).map(a=>_e.call(r,a)).filter((a,p)=>!Array.isArray(a.event)),l.length&&(e.attrInterceptionHooks.get("intercept")?.forEach(a=>a(l)),e.attrInterceptionHooks.get("sync")?.forEach(a=>a(l)))}).observe(n,{attributes:!0,subtree:!0,attributeOldValue:!0});let u=Object.create(null);return["setAttribute","removeAttribute","toggleAttribute"].forEach(l=>{u[l]=s.prototype[l],s.prototype[l]=function(...a){let p,g=this.getAttribute(a[0]);["setAttribute","toggleAttribute"].includes(l)&&(p=a[1]),l==="toggleAttribute"&&p===void 0&&(p=g===null);let m={target:this,name:a[0],value:p,oldValue:g,type:"interception",event:[this,l]};return f(m,()=>u[l].call(this,...a))}}),o}var R=class extends ${constructor(t,...r){super(t,"tree",...r)}attr(t,r=void 0,e={}){let{context:n,window:s}=this;return new M(n,s).get(...arguments)}query(t,r=void 0,e={}){[t,r=void 0,e={}]=this.resolveArgs(arguments);let{context:n}=this,s=new Map,o=u=>(s.has(u)||s.set(u,{target:u,entrants:[],exits:[],type:"query",event:null}),s.get(u));if((!e.generation||e.generation==="entrants")&&(t.length?t.every(u=>typeof u=="string")&&(t=t.join(","))&&(e.subtree?n.querySelectorAll(t):[...n.children].filter(l=>l.matches(t))).forEach(l=>o(l.parentNode||n).entrants.push(l)):[...n.children].forEach(u=>o(n).entrants.push(u))),!r)return s;let f={disconnected:!1},c=r&&e.lifecycleSignals&&this.createSignalGenerator();for(let[,u]of s){if(f.disconnected)break;let l=c?.generate()||{};r(u,l,n)}if(e.live){c&&(e={...e,signalGenerator:c});let u=this.observe(t,r,e);return this.disconnectables(e.signal,f,u)}return this.disconnectables(e.signal,f,c)}children(t,r=void 0,e={}){return[t,r=void 0,e={}]=this.resolveArgs(arguments),this.query(t,r,{...e,subtree:!1})}subtree(t,r=void 0,e={}){return[t,r=void 0,e={}]=this.resolveArgs(arguments),this.query(t,r,{...e,subtree:!0})}observe(t,r,e={}){if([t,r,e={}]=this.resolveArgs(arguments),["sync","intercept"].includes(e.timing))return this.observeSync(t,r,e);if(e.timing&&e.timing!=="async")throw new Error(`Timing option "${e.timing}" invalid.`);let{context:n,window:s,wq:o,document:f}=this;e.eventDetails&&(o.domInterceptionRecordsAlwaysOn=!0),(f.readyState==="loading"||o.domInterceptionRecordsAlwaysOn)&&!o.domInterceptionHooks?.intercepting&&ve.call(s,"sync",()=>{});let c=new s.MutationObserver(a=>a.forEach(p=>{be.call(s,l,Oe.call(s,p),n)}));c.observe(n,{childList:!0,subtree:e.subtree});let u=e.signalGenerator||e.lifecycleSignals&&this.createSignalGenerator(),l={context:n,selectors:t,callback:r,params:e,signalGenerator:u,disconnectable:c};if(e.staticSensitivity){let a=xe.call(s,l);return this.disconnectables(e.signal,c,u,a)}return this.disconnectables(e.signal,c,u)}observeSync(t,r,e={}){[t,r,e={}]=this.resolveArgs(arguments);let{context:n,window:s}=this;if(e.timing&&!["sync","intercept"].includes(e.timing))throw new Error(`Timing option "${e.timing}" invalid.`);let o=e.timing==="intercept"?"intercept":"sync",f=e.subtree?"subtree":"children";this.registry(o).size||ve.call(s,o,g=>{this.forEachMatchingContext(o,g,be)});let c={disconnect(){p.delete(l),p.size||a.delete(n)}},u=e.signalGenerator||e.lifecycleSignals&&this.createSignalGenerator(),l={context:n,selectors:t,callback:r,params:e,signalGenerator:u,disconnectable:c},a=this.registry(o,f);a.has(n)||a.set(n,new Set);let p=a.get(n);if(p.add(l),e.staticSensitivity){let g=xe.call(s,l);return this.disconnectables(e.signal,c,u,g)}return this.disconnectables(e.signal,c,u)}};function xe(i){let t=this,{context:r,selectors:e,callback:n,params:s,signalGenerator:o}=i,f=l=>[...l.matchAll(/\[([^\=\]]+)(\=[^\]]+)?\]/g)].map(a=>a[1]);if(!(i.$attrs=e.filter(l=>typeof l=="string"&&l.includes("[")).reduce((l,a)=>l.concat(f(a)),[])).length)return;let c=new Set,u=new Set;return c.push=l=>(u.delete(l),c.add(l)),u.push=l=>(c.delete(l),u.add(l)),i.$deliveryCache={entrants:c,exits:u},new M(r,t).observe(i.$attrs,l=>{let a=new Map,p=h=>(a.has(h)||a.set(h,{target:h,entrants:[],exits:[],type:"static",event:null}),a.get(h)),g=new WeakMap,m=h=>(g.has(h)||g.set(h,e.some(d=>h.matches(d))),g.get(h));for(let h of l)["entrants","exits"].forEach(d=>{s.generation&&d!==s.generation||i.$deliveryCache[d].has(h.target)||(d==="entrants"?!m(h.target):m(h.target))||(i.$deliveryCache[d].push(h.target),p(h.target)[d].push(h.target),p(h.target).event=h.event)});for(let[,h]of a){let d=o?.generate()||{};n(h,d,r)}},{subtree:s.subtree,timing:s.timing,eventDetails:s.eventDetails})}function be(i,t){let{context:r,selectors:e,callback:n,params:s,signalGenerator:o,$deliveryCache:f}=i,c={...t,entrants:[],exits:[]};if(["entrants","exits"].forEach(l=>{if(!(s.generation&&l!==s.generation)&&(e.length?c[l]=Ue(e,t[l],t.event!=="parse"):c[l]=[...t[l]],!!f))for(let a of c[l])f[l].push(a)}),!c.entrants.length&&!c.exits.length)return;let u=o?.generate()||{};n(c,u,r)}function Ue(i,t,r){t=Array.isArray(t)?t:[...t];let e=(n,s)=>{if(n=n.filter(o=>o.matches),typeof s=="string"){let o=n.filter(f=>f.matches(s));if(r&&(o=n.reduce((f,c)=>[...f,...c.querySelectorAll(s)],o)),o.length)return o}else if(n.includes(s)||r&&n.some(o=>o.contains(s)))return[s]};return t.$$searchCache||(t.$$searchCache=new Map),i.reduce((n,s)=>{let o;return t.$$searchCache.has(s)?o=t.$$searchCache.get(s):(o=e(t,s)||[],x(s)&&t.$$searchCache.set(s,o)),n.concat(o)},[])}function Oe({target:i,addedNodes:t,removedNodes:r}){let e=this,n;return n=C(t).reduce((s,o)=>s||e.wq.domInterceptionRecords?.get(o),null),n=C(r).reduce((s,o)=>s||e.wq.domInterceptionRecords?.get(o),n),n=n||e.document.readyState==="loading"&&"parse"||"mutation",{target:i,entrants:t,exits:r,type:"observation",event:n}}function ve(i,t){let r=this,{wq:e,document:n,Node:s,Element:o,HTMLElement:f,HTMLTemplateElement:c,DocumentFragment:u}=r;e.domInterceptionHooks||(e.domInterceptionHooks=new Map),e.domInterceptionHooks.has(i)||e.domInterceptionHooks.set(i,new Set),e.domInterceptionHooks.get(i).add(t);let l=()=>e.domInterceptionHooks.get(i).delete(t);if(e.domInterceptionHooks?.intercepting)return l;console.warn("DOM mutation APIs are now being intercepted."),e.domInterceptionHooks.intercepting=!0,e.domInterceptionRecords=new Map;let a=()=>!0,p=(m,h)=>{a()?m.entrants.concat(m.exits).forEach(y=>{clearTimeout(e.domInterceptionRecords.get(y)?.timeout),e.domInterceptionRecords.set(y,m.event);let _=setTimeout(()=>{e.domInterceptionRecords.delete(y)},0);Object.defineProperty(m.event,"timeout",{value:_,configurable:!0})}):e.domInterceptionRecords.clear(),e.domInterceptionHooks.get("intercept")?.forEach(y=>y(m));let d=h();return e.domInterceptionHooks.get("sync")?.forEach(y=>y(m)),d};if(a()){let m=new r.MutationObserver(h=>h.forEach(d=>{Array.isArray((d=Oe.call(r,d)).event)||(e.domInterceptionHooks.get("intercept")?.forEach(y=>y(d)),e.domInterceptionHooks.get("sync")?.forEach(y=>y(d)))}));m.observe(n,{childList:!0,subtree:!0}),n.addEventListener("readystatechange",()=>!a()&&m.disconnect())}let g=Object.create(null);return["insertBefore","insertAdjacentElement","insertAdjacentHTML","setHTML","replaceChildren","replaceWith","remove","replaceChild","removeChild","before","after","append","prepend","appendChild"].forEach(m=>{let h=["insertBefore","replaceChild","removeChild","appendChild"].includes(m)?s:o;g[m]=h.prototype[m],g[m]&&(h.prototype[m]=function(...d){let y=()=>g[m].call(this,...d);if(!(this instanceof o||this instanceof u))return y();let _=[],v=[],E=this;["insertBefore"].includes(m)?v=[d[0]]:["insertAdjacentElement","insertAdjacentHTML"].includes(m)?(v=[d[1]],["beforebegin","afterend"].includes(d[0])&&(E=this.parentNode)):["setHTML","replaceChildren"].includes(m)?(_=[...this.childNodes],v=m==="replaceChildren"?[...d]:[d[0]]):["replaceWith","remove"].includes(m)?(_=[this],v=m==="replaceWith"?[...d]:[],E=this.parentNode):["replaceChild"].includes(m)?(_=[d[1]],v=[d[0]]):["removeChild"].includes(m)?_=[...d]:(v=[...d],["before","after"].includes(m)&&(E=this.parentNode));let N=m;if(["insertAdjacentHTML","setHTML"].includes(m)){let F=this.nodeName;if(m==="insertAdjacentHTML"&&["beforebegin","afterend"].includes(d[0])){if(!this.parentNode)return g[m].call(this,...d);F=this.parentNode.nodeName}let B=n.createElement(F);g.setHTML.call(B,v[0],m==="setHTML"?d[1]:{}),v=[...B.childNodes],m==="insertAdjacentHTML"?(N="insertAdjacentElement",d[1]=new u,d[1].______isTemp=!0,d[1].append(...B.childNodes)):(N="replaceChildren",d=[...B.childNodes])}return p({target:E,entrants:v,exits:_,type:"interception",event:[this,m]},()=>g[N].call(this,...d))})}),["outerHTML","outerText","innerHTML","innerText","textContent","nodeValue"].forEach(m=>{let h=["textContent","nodeValue"].includes(m)?s:["outerText","innerText"].includes(m)?f:o;g[m]=Object.getOwnPropertyDescriptor(h.prototype,m),Object.defineProperty(h.prototype,m,{...g[m],set:function(d){let y=()=>g[m].set.call(this,d);if(!(this instanceof o))return y();let _=[],v=[],E=this;if(["outerHTML","outerText"].includes(m)?(_=[this],E=this.parentNode):_=[...this.childNodes],["outerHTML","innerHTML"].includes(m)){let G=this.nodeName;if(m==="outerHTML"){if(!this.parentNode)return y();G=this.parentNode.nodeName}let F=n.createElement(G==="TEMPLATE"?"div":G);g[m].set.call(F,d),v=this instanceof c?[]:[...F.childNodes],m==="outerHTML"?(d=new u,d.______isTemp=!0,d.append(...F.childNodes),y=()=>g.replaceWith.call(this,d)):this instanceof c?y=()=>this.content.replaceChildren(...F.childNodes):y=()=>g.replaceChildren.call(this,...F.childNodes)}return p({target:E,entrants:v,exits:_,type:"interception",event:[this,m]},y)}})}),["append","prepend","replaceChildren"].forEach(m=>{[n,u.prototype].forEach(h=>{let d=h[m];h[m]=function(...y){if(this.______isTemp)return d.call(this,...y);let _=m==="replaceChildren"?[...this.childNodes]:[];return p({target:this,entrants:y,exits:_,type:"interception",event:[this,m]},()=>d.call(this,...y))}})}),l}function Se(){ze.call(this),Qe.call(this),ke.call(this)}function ze(){let i=this;i.CSS||(i.CSS={}),i.CSS.escape||(i.CSS.escape=t=>t.replace(/([\:@\~\$\&])/g,"\\$1"))}function Qe(){let i=this;"isConnected"in i.Node.prototype||Object.defineProperty(i.Node.prototype,"isConnected",{get:function(){return!this.ownerDocument||!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}function ke(){let i=this;i.Element.prototype.matches||(i.Element.prototype.matches=i.Element.prototype.matchesSelector||i.Element.prototype.mozMatchesSelector||i.Element.prototype.msMatchesSelector||i.Element.prototype.oMatchesSelector||i.Element.prototype.webkitMatchesSelector||function(t){for(var r=(this.document||this.ownerDocument).querySelectorAll(t),e=r.length;--e>=0&&r.item(e)!==this;);return e>-1})}function Ce(){let i=this;if(i.wq||(i.wq={}),i.wq.dom)return i.wq.dom;i.wq.dom={},Se.call(i);let t=pe(i);return i.wq.dom.Reflow=new t,i.wq.dom.DOMRealtime=R,i.wq.dom.AttrRealtime=M,i.wq.dom.realtime=(r,e="tree")=>{if(e==="tree")return new R(r,i);if(e==="attr")return new M(r,i)},i.wq.dom.ready=Je.bind(i),i.wq.dom.meta=Xe.bind(i),i.wq.dom}function Je(i){let t=this;t.document.readyState==="complete"?i(t):(t.document.domReadyCallbacks||(t.document.domReadyCallbacks=[],t.document.addEventListener("DOMContentLoaded",()=>{t.document.domReadyCallbacks.splice(0).forEach(r=>r(t))},!1)),t.document.domReadyCallbacks.push(i))}function Xe(i,t=!1){let r=this,e={content:{}};return!(e.el=r.document.querySelector(`meta[name="${i}"]`))&&t&&(e.el=r.document.createElement("meta"),e.el.setAttribute("name",i),r.document.head.append(e.el)),e.el&&(e.content=(e.el.getAttribute("content")||"").split(";").filter(n=>n).reduce((n,s)=>{let o=s.split("=").map(f=>f.trim());return te(n,o[0].split("."),o[1]==="true"?!0:o[1]==="false"?!1:A(o[1])?parseInt(o[1]):o[1]),n},{})),e.get=function(n){return JSON.parse(JSON.stringify(q(this.content,n.split("."))))},e.copy=function(){return JSON.parse(JSON.stringify(this.content))},e.copyWithDefaults=function(...n){return n.length?D(!0,{},...n.reverse().concat(this.content)):this.copy()},e}function ie(i={}){let t=this,e=Ce.call(t).meta("oohtml").copyWithDefaults(i,{retention:"retain",mimeType:""});e.scriptSelector=(Array.isArray(e.mimeType)?e.mimeType:[e.mimeType]).reduce((n,s)=>{let o=s?`[type=${t.CSS.escape(s)}]`:"";return n.concat(`script${o}[scoped],script${o}[contract]`)},[]).join(","),Ye.call(this,e)}function Ye(i){let t=this,{dom:r}=t.wq;t.wq.transformCache=new Map,t.wq.compileCache=[new Map,new Map];let e=()=>{};r.realtime(t.document).observe(i.scriptSelector,n=>{n.entrants.forEach(s=>{if("contract"in s||(Object.defineProperty(s,"contract",{value:s.hasAttribute("contract")}),"scoped"in s))return e(s);Object.defineProperty(s,"scoped",{value:s.hasAttribute("scoped")});let o=s.scoped?n.target:s.type==="module"?void 0:t;Ke.call(this,s,o,i)})},{subtree:!0,timing:"intercept",generation:"entrants"}),t.wq.exec=n=>{let s=ot(n);if(!s)throw new Error("Argument must be a valid exec hash.");let{script:o,compiledScript:f,thisContext:c}=s;switch(c instanceof t.Element&&o.scoped&&(c.scripts||Object.defineProperty(c,"scripts",{value:new Set}),c.scripts.add(o)),i.retention){case"dispose":o.remove();break;case"hidden":o.textContent='"hidden"';break;default:o.textContent=f.function.originalSource}return Ze.call(this,f,c,o)}}function Ze(i,t,r){if(!i.function)throw new Error("Input script must already be compiled!");let e=i.function.call(t);i.contract&&Object.defineProperty(r,"rerender",{value:(...f)=>it(e,([,c])=>c(...f))});let n=this,{dom:s}=n.wq;if(!(t instanceof n.EventTarget))return e;let o;return r.contract&&(o=f=>{r.rerender((f.detail||{paths:[]}).paths)},t.addEventListener("namespacechange",o),t.addEventListener("statechange",o)),s.realtime(n.document).observe(t,()=>{r.contract&&(t.removeEventListener("namespacechange",o),t.removeEventListener("statechange",o)),t.dispatchEvent(new n.CustomEvent("remove")),t.scripts.delete(r)},{subtree:!0,timing:"sync",generation:"exits"}),r}function Ke(i,t,r={}){let e=this.wq,n=e.compileCache[i.contract?0:1],s=Ae(i.textContent),o=i.textContent,f;if(!(f=n.get(s))){let u=[],l={},a=[];i.type==="module"&&a.push("import "),i.type==="module"&&!i.contract&&a.push("await "),a.length&&new RegExp(a.join("|")).test(o)&&([u,o,l]=et(o),u.length&&(o=`
	${tt(u).join(`
	`)}
	${o}
`));let p;if(i.contract){let g={...r.parserParams||{},allowReturnOutsideFunction:!1,allowAwaitOutsideFunction:i.type==="module",allowSuperOutsideMethod:!1},m={...r.runtimeParams||{},async:i.type==="module",apiVersion:2};p=U(o,{...r,parserParams:g,runtimeParams:m})}else{let m=i.type==="module"?Object.getPrototypeOf(async function(){}).constructor:Function;p=r.runtimeParams?.compileFunction?r.runtimeParams.compileFunction(o):new m(o),Object.defineProperty(p,"originalSource",{configurable:!0,value:i.textContent})}f=Object.defineProperty(i.cloneNode(),"function",{value:p}),i.scoped&&Object.defineProperty(f,"scoped",Object.getOwnPropertyDescriptor(i,"scoped")),i.contract&&Object.defineProperty(f,"contract",Object.getOwnPropertyDescriptor(i,"contract")),n.set(s,f)}let c=Ae({script:i,compiledScript:f,thisContext:t});i.textContent=`wq.exec('${c}');`}function et(i){let[t,r]=Ee(i,(o,f,c,u,l,a)=>{if(f==="start-enclosure"&&c==="{"&&!u.openAsync?.type&&u.openEnclosures.length===u.openAsync?.scopeId)u.openAsync.type="block";else if(f==="end-enclosure"&&c==="}"&&u.openAsync?.type==="block"&&u.openEnclosures.length===u.openAsync.scopeId)u.openAsync=null;else if(f==="start-quote"&&!u.openEnclosures.length&&["starting","from"].includes(u.openImport))u.openImport="url";else if(f==="end-quote"&&u.openImport==="url")u.openImport="closing";else if(f==="char"){if(u.openImport==="closing"&&(c===";"||![" ",`
`].includes(c)||a))return c===";"||a?(o[0]+=c,o.unshift("")):o.unshift(c),u.openImport=null,!1;let p=i.substring(l-1);if(!u.openImport&&/^[\W]?import[ ]*[^\(]/.test(p))return u.openImport="starting",o.unshift(""),6;if(u.openImport==="starting"&&/^[\W]?from /.test(p))return u.openImport="from",4;if(!u.openAsync){if(/^[\W]?async /.test(p))return u.openAsync={scopeId:u.openEnclosures.length},5;if(/^[\W]?await /.test(p))return u.topLevelAwait=!0,5}u.openAsync&&(!u.openAsync.type&&/.?\=\>[ ]*?\{/.test(p)?u.openAsync.type="inline-arrow":u.openAsync.type==="inline-arrow"&&[`
`,";"].includes(c)&&u.openEnclosures.length===u.openAsync.scopeId&&(u.openAsync=null))}}),e=[],n="",s;for(let o of t.reverse())(s=o.trim()).startsWith("import ")?e.push(o):s&&(n+=o);return[e,n,r]}function tt(i){let t=[],r=[];return i.forEach((e,n)=>{e=rt(e);let[s,o]=e.items.reduce(([f,c],u)=>u.id==="*"?[u.alias,c]:[f,c.concat(u)],[null,[]]);if(s&&t.push(`const ${s} = __$imports$__[${n}];`),o.length){let f=o.map(c=>`${c.id}${c.id!==c.alias?`: ${c.alias}`:""}`).join(", ");t.push(`const { ${f} } = __$imports$__[${n}];`)}r.push(`import("${e.url}")`)}),[`
	const __$imports$__ = await Promise.all([
		${r.join(`,
		`)}
	]);`,t.join(`
	`)]}function rt(i){let t=n=>{let s=/^[`'"]/.exec(n);return s&&n.substring(1,n.lastIndexOf(s[0]))},r={items:[{id:""}]},e=i.replace("import","").trim();return(r.url=t(e))||Ee(e,(n,s,o,f,c,u)=>{if(["start-quote","ongoing-quote","end-quote","char"].includes(s)){if(r.url)return;if(!f.openQuote){let l=e.substring(c);if(o===","){r.items.unshift({id:""});return}if(l.startsWith(" as "))return r.items[0].alias="",3;if(l.startsWith(" from "))return r.url=t(l.replace("from","").trim()),l.length}"alias"in r.items[0]?r.items[0].alias+=o:(r.items[0].id+=o,f.openEnclosures.length&&(r.items[0].enclosed=!0))}}),r.items=r.items.map(n=>({id:n.id&&!n.alias&&!n.enclosed?"default":n.id.trim(),alias:n.alias?n.alias.trim():n.id.trim()})).filter(n=>n.id).reverse(),r}function Ee(i,t){let r=i.length-1;return[...i].reduce(([e,n,s],o,f)=>{if(s)return e[0]+=o,[e,n,--s];let c;if(n.openQuote||n.openComment)return o===n.openQuote?(n.openQuote=null,c=t(e,"end-quote",o,n,f,f===r)):n.openQuote?c=t(e,"ongoing-quote",o,n,f,f===r):n.openComment&&(n.openComment==="//"&&o===`
`||n.openComment==="/*"&&e[0].substr(-1)==="*"&&o==="/")&&(n.openComment=null,c=t(e,"end-comment",o,n,f,f===r)),c!==!1&&(e[0]+=o),[e,n,typeof c=="number"?c:s];let u;return(u=["()","{}","[]"].filter(l=>o===l[0])[0])?(c=t(e,"start-enclosure",o,n,f,f===r),n.openEnclosures.unshift(u)):n.openEnclosures.length&&o===n.openEnclosures[0][1]?(n.openEnclosures.shift(),c=t(e,"end-enclosure",o,n,f,f===r)):['"',"'","`"].includes(o)?(c=t(e,"start-quote",o,n,f,f===r),n.openQuote=o):!n.openComment&&["/*","//"].includes(i.substr(f,2))?(c=t(e,"start-comment",o,n,f,f===r),n.openComment=i.substr(f,2)):c=t(e,"char",o,n,f,f===r),c!==!1&&(e[0]+=o),[e,n,typeof c=="number"?c:s]},[[""],{openEnclosures:[]},0])}var ne=new Map,nt=()=>(0|Math.random()*9e6).toString(36),it=(i,t)=>i instanceof Promise?i.then(t):t(i);function Ae(i){let t;return(t=ne.get(i))||(t=nt(),ne.set(i,t)),t}function ot(i){let t;return ne.forEach((r,e)=>{r===i&&(t=e)}),t}ie.call(window);})();
//# sourceMappingURL=scoped-js.js.map
